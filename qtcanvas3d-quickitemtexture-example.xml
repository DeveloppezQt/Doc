<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Qt Quick Item as Texture Example</db:title>
<db:productname>QtCanvas3D</db:productname>
<db:edition>Qt 5.7.1 Reference Documentation</db:edition>
<db:titleabbrev>Qt Canvas 3D Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>A simple cube with a Qt Quick item as a texture.</db:para>
<db:para>This documentation was introduced in QtCanvas3D 1.0.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The Qt Quick Item as Texture example shows how to use other Qt Quick items as a texture source for Qt <db:link xlink:href="qml-qtcanvas3d-canvas3d.xml">Canvas3D</db:link> textures.</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/quickitemtexture-example.png"/>
</db:imageobject>
</db:mediaobject>
<db:section xml:id="using-qt-quick-item-as-a-texture">
<db:title>Using Qt Quick Item as a Texture</db:title>
<db:para>First we create a <db:link xlink:href="qml-qtquick-rectangle.xml">Rectangle</db:link> with a label that displays the current frame rate and rotation values of the cube:</db:para>
<db:programlisting language="qml">Rectangle {
    id: textureSource
    color: &quot;lightgreen&quot;
    width: 256
    height: 256
    border.color: &quot;blue&quot;
    border.width: 4
    layer.enabled: true
    layer.smooth: true
    Label {
        anchors.fill: parent
        anchors.margins: 16
        text: &quot;X Rot:&quot; + (canvas3d.xRotAnim | 0) + &quot;\n&quot;
            + &quot;Y Rot:&quot; + (canvas3d.yRotAnim | 0) + &quot;\n&quot;
            + &quot;Z Rot:&quot; + (canvas3d.zRotAnim | 0) + &quot;\n&quot;
            + &quot;FPS:&quot; + canvas3d.fps
        color: &quot;red&quot;
        font.pointSize: 26
        horizontalAlignment: Text.AlignLeft
        verticalAlignment: Text.AlignVCenter
    }
}
</db:programlisting>
<db:para>We want to use the above <db:link xlink:href="qml-qtquick-rectangle.xml">Rectangle</db:link> as the texture on our 3D cube. As a <db:link xlink:href="qml-qtquick-rectangle.xml">Rectangle</db:link> item doesn't implement <db:link xlink:href="qquickitem.xml#textureProvider">QQuickItem::textureProvider</db:link>() by itself, we make it layered by setting the <db:code>layer.enabled</db:code> property to <db:code>true</db:code>.</db:para>
<db:para>To create a <db:link xlink:href="qml-qtcanvas3d-canvas3dtexture.xml">Canvas3DTexture</db:link> out of our layered <db:link xlink:href="qml-qtquick-rectangle.xml">Rectangle</db:link>, we create a <db:link xlink:href="qml-qtcanvas3d-canvas3dtextureprovider.xml">QTCANVAS3D_texture_provider</db:link> extension and the texture in the <db:code>initializeGL()</db:code> function in our JavaScript implementation:</db:para>
<db:programlisting language="cpp">canvasTextureProvider = gl.getExtension(&quot;QTCANVAS3D_texture_provider&quot;);
cubeTexture = canvasTextureProvider.createTextureFromSource(textureSourceItem);
</db:programlisting>
<db:para>Once the <db:code>cubeTexture</db:code> item is created, it can be used like any other texture item in the JavaScript.</db:para>
<db:note>
<db:para>The method of creating the texture from a Qt Quick item differs from how one would create texture from an HTML item in WebGL API. Textures created with <db:link xlink:href="qml-qtcanvas3d-canvas3dtextureprovider.xml">QTCANVAS3D_texture_provider</db:link> extension support automatic live updates, without having to call textureImage2D each frame to re-upload fresh texture data from the item.</db:para>
</db:note>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Files:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="quickitemtexture/main.cpp">quickitemtexture/main.cpp</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="quickitemtexture/qml/quickitemtexture/main.qml">quickitemtexture/qml/quickitemtexture/main.qml</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="quickitemtexture/qml/quickitemtexture/quickitemtexture.js">quickitemtexture/qml/quickitemtexture/quickitemtexture.js</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="quickitemtexture/quickitemtexture.pro">quickitemtexture/quickitemtexture.pro</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="quickitemtexture/quickitemtexture.qrc">quickitemtexture/quickitemtexture.qrc</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
</db:section></db:article>
