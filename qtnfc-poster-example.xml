<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>QML Poster Example</db:title>
<db:productname>QtNfc</db:productname>
<db:edition>Qt 5.12.12 Reference Documentation</db:edition>
<db:titleabbrev>Qt NFC Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>A QML example about reading and displaying NFC Data Exchange Format (NDEF) messages.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The QML Poster example displays the contents of specifically formatted NFC Data Exchange Format (NDEF) messages read from an NFC Tag. The NDEF message must contain a URI record, an optional <db:code>image/*</db:code> MIME record, and one or more localized Text records.</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/qml-poster-example.png"/>
</db:imageobject>
</db:mediaobject>
<db:section xml:id="running-the-example">
<db:title>Running the Example</db:title>
<db:para>To run the example from <db:link xlink:href="http://doc.qt.io/qtcreator/index.html">Qt Creator</db:link>, open the <db:emphasis role="bold">Welcome</db:emphasis> mode and select the example from <db:emphasis role="bold">Examples</db:emphasis>. For more information, visit <db:link xlink:href="http://doc.qt.io/qtcreator/creator-build-example-application.html">Building and Running an Example</db:link>.</db:para>
</db:section>
<db:section xml:id="applying-ndef-filters">
<db:title>Applying NDEF Filters</db:title>
<db:para>The example is designed to display the content of a very specific type of NFC tag. The tag must contain at least one URI record and one text record. If those two record types do not exist, nothing will happen. Such filtering is applied via the <db:link xlink:href="qml-qtnfc-nearfield.xml">NearField</db:link> type's filter property. The property accepts a list of <db:link xlink:href="qml-qtnfc-ndeffilter.xml">NdefFilter</db:link> objects.</db:para>
<db:programlisting language="qml">filter: [
    NdefFilter { type: &quot;U&quot;; typeNameFormat: NdefRecord.NfcRtd; maximum: 1 },
    NdefFilter { type: &quot;T&quot;; typeNameFormat: NdefRecord.NfcRtd },
    NdefFilter { typeNameFormat: NdefRecord.Mime; minimum: 0; maximum: 1 }
]

</db:programlisting>
</db:section>
<db:section xml:id="processing-found-ndef-messages">
<db:title>Processing Found NDEF Messages</db:title>
<db:para>Once an appropriate tag is found, the <db:link xlink:href="qml-qtnfc-nearfield.xml#messageRecords-prop">NearField::messageRecords</db:link> property reflects the content. It transports the list of found NDEF records. The QML snippet below demonstrates how these records can be accessed:</db:para>
<db:programlisting language="qml">onMessageRecordsChanged: {
    for (i = 0; i &amp;lt; messageRecords.length; ++i) {
        switch (messageRecords[i].typeNameFormat) {
        case NdefRecord.NfcRtd:
            if (messageRecords[i].type === &quot;T&quot;) {
                if (messageRecords[i].localeMatch &amp;gt; currentLocaleMatch) {
                    currentLocaleMatch = messageRecords[i].localeMatch;
                    posterText.text = messageRecords[i].text;
                    found = true;
                }

            } else if (messageRecords[i].type === &quot;U&quot;) {
                 posterUrl.text = messageRecords[i].uri;
                found = true;
            }
            break;
        case NdefRecord.Mime:
            if (messageRecords[i].type.indexOf(&quot;image/&quot;) === 0 ) {
                posterImage.source = messageRecords[i].uri;
                found = true;
            }
            break;
        }

        if (!found)
            console.warn(&quot;Unknown NFC tag detected. Cannot display content.&quot;)
    }
}
</db:programlisting>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Files:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="poster/poster.pro">poster/poster.pro</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="poster/poster.qml">poster/poster.qml</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="poster/poster.qrc">poster/poster.qrc</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="poster/qmlposter.cpp">poster/qmlposter.cpp</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qtnfc-index.xml">Qt NFC</db:link></db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section></db:article>
