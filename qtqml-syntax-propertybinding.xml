<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en_US">
<db:info>
<db:title>Property Binding</db:title>
<db:productname>QtQml</db:productname>
<db:edition>Qt 5.2.1 Reference Documentation</db:edition>
<db:titleabbrev>Qt QML Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>binding object properties.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>To make the fullest use of QML and its built-in support for implementing dynamic object behavioral changes, most QML objects will use <db:emphasis>property binding</db:emphasis>. This is a core feature of QML that allows objects to automatically update their properties in response to changing attributes in other objects or the occurrence of some external event.</db:para>
<db:para>When an object's property is assigned a value, it can either be assigned a static value, or <db:emphasis>bound</db:emphasis> to a JavaScript expression. In the first case, the property's value will not change unless a new value is assigned to the property. In the latter case, a <db:emphasis>property binding</db:emphasis> is created and the property's value is automatically updated by the QML engine whenever the value of the evaluated expression changes.</db:para>
<db:section xml:id="overview">
<db:title>Overview</db:title>
<db:para>To create a property binding, a property is assigned an expression that evaluates to the desired value. At its simplest, an expression may simply be a reference to another object's property. Take the following example, where the blue Rectangle's height is bound to the height of its parent:</db:para>
<db:programlisting language="qml">Rectangle {
    width: 200; height: 200

    Rectangle {
        width: 100; height: parent.height
        color: &quot;blue&quot;
    }
}
</db:programlisting>
<db:para>Whenever the height of the parent item changes, the height of the blue rectangle will update to be of the same value.</db:para>
<db:para>Furthermore, a binding can contain any valid JavaScript expression or statement, as QML uses a standards compliant JavaScript engine. Below are valid bindings that could be substituted for the height binding from the above example:</db:para>
<db:programlisting language="cpp">height: parent.height / 2

height: Math.min(parent.width, parent.height)

height: parent.height &gt; 100 ? parent.height : parent.height/2

height: {
    if (parent.height &gt; 100)
        return parent.height
    else
        return parent.height / 2
}

height: someMethodThatReturnsHeight()
</db:programlisting>
<db:para>Whenever the value of parent.height changes, the QML engine will re-evaluate the above expression and assign the blue rectangle's width property with the appropriate updated value.</db:para>
<db:para>Bindings can access object properties, call methods and use built-in JavaScript objects such as Date and Math. Here is an example with various valid bindings:</db:para>
<db:programlisting language="qml">Column {
    width: 200
    height: 200

    Rectangle {
        width: Math.max(bottomRect.width, parent.width/2)
        height: (parent.height / 3) + 10
        color: &quot;yellow&quot;

        TextInput {
            id: myTextInput
            text: &quot;Hello QML!&quot;
        }
    }

    Rectangle {
        id: bottomRect
        width: 100
        height: 50
        color: myTextInput.text.length &lt;= 10 ? &quot;red&quot; : &quot;blue&quot;
    }
}
</db:programlisting>
<db:para>While syntactically bindings can be of arbitrary complexity, if a binding starts to become overly complex - such as involving multiple lines, or imperative loops - it may be better to refactor the component entirely, or at least factor the binding out into a separate function.</db:para>
</db:section>
<db:section xml:id="creating-property-bindings-from-javascript">
<db:title>Creating Property Bindings from JavaScript</db:title>
<db:para>Once a property has been bound to an expression, the property is set to be automatically updated as necessary. However, be aware that if the property is later assigned a static value from a JavaScript statement, this will remove the binding.</db:para>
<db:para>For example, the height of the Rectangle below is initially bound to be twice its width. However, when the space key is pressed, the height value is changed to be three times its width. At this point, the height is assigned the currently evaluated result of width*3 and <db:emphasis>the height will no longer be automatically updated whenever the width changes</db:emphasis>. The assignment of the static value removes the binding.</db:para>
<db:programlisting language="qml">import QtQuick 2.0

Rectangle {
    width: 100
    height: width * 2

    focus: true
    Keys.onSpacePressed: {
        height = width * 3
    }
}
</db:programlisting>
<db:para>If the intention is to remove the binding, then this is not a problem. However if the intention is to create a new binding of width*3 then the property must be assigned a Qt.binding() value instead. This is done by passing a function to Qt.binding() that returns the desired result:</db:para>
<db:programlisting language="qml">import QtQuick 2.0

Rectangle {
    width: 100
    height: width * 2

    focus: true
    Keys.onSpacePressed: {
        height = Qt.binding(function() { return width * 3 })
    }
}
</db:programlisting>
<db:para>Now when the space key is pressed, a new binding of width*3 is assigned, instead of simply removing the initial binding.</db:para>
<db:section xml:id="using-keyword-this-keyword-with-property-binding">
<db:title>Using this with Property Binding</db:title>
<db:para>When creating a property binding from JavaScript, QML allows the use of the this keyword to refer to the object to which the property binding will be assigned. This allows one to explicitly refer to a property within an object when there may be ambiguity about the exact property that should be used for the binding.</db:para>
<db:para>For example, the Component.onCompleted handler below is defined within the scope of the Item, and references to width within this scope would refer to the Item's width, rather than that of the Rectangle. To bind the Rectangle's height to its own width, the function passed to Qt.binding() needs to explicitly refer to this.width rather than just width.</db:para>
<db:programlisting language="qml">Item {
    width: 500
    height: 500

    Rectangle {
        id: rect
        width: 100
        color: &quot;yellow&quot;
    }

    Component.onCompleted: {
        rect.height = Qt.binding(function() { return this.width * 2 })
        console.log(&quot;rect.height = &quot; + rect.height) // prints 200, not 1000
    }
}
</db:programlisting>
<db:para>In this case, the function could also have referred to rect.width rather than this.width.</db:para>
<db:para>Note that the value of this is not defined outside of its use in property binding. See <db:link xlink:href="qtqml-javascript-hostenvironment.xml#javascript-environment-restrictions">JavaScript Environment Restrictions</db:link> for details.</db:para>
</db:section>
</db:section>
</db:article>
