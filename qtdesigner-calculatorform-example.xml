<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Calculator Form Example</db:title>
<db:productname>QtDesigner</db:productname>
<db:edition>Qt 5.6.3 Reference Documentation</db:edition>
<db:titleabbrev>Qt Designer Manual</db:titleabbrev>
<db:abstract>
<db:para>Using a form created with <db:emphasis>Qt Designer</db:emphasis> in an application.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The Calculator Form Example shows how to use a form created with <db:emphasis>Qt Designer</db:emphasis> in an application by using the user interface information from a <db:link xlink:href="qwidget.xml">QWidget</db:link> subclass. We use <db:link xlink:href="designer-using-a-ui-file.xml">uic's auto-connection</db:link> feature to automatically connect signals from widgets on the form to slots in our code.</db:para>
<db:mediaobject>
<db:alt>Screenshot of the Calculator Form example</db:alt>
<db:imageobject>
<db:imagedata fileref="images/calculatorform-example.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>The example presents two spin boxes that are used to input integer values and a label that shows their sum. Whenever either of the spin boxes are updated, the signal-slot connections between the widgets and the form ensure that the label is also updated.</db:para>
<db:section xml:id="preparation">
<db:title>Preparation</db:title>
<db:para>The user interface for this example is designed completely using <db:emphasis>Qt Designer</db:emphasis>. The result is a UI file describing the form, the widgets used, any signal-slot connections between them, and other standard user interface properties.</db:para>
<db:para>To ensure that the example can use this file, we need to include a <db:code>FORMS</db:code> declaration in the example's project file:</db:para>
<db:programlisting language="cpp">FORMS       = calculatorform.ui
</db:programlisting>
<db:para>When the project is built, <db:code>uic</db:code> will create a header file that lets us construct the form.</db:para>
</db:section>
<db:section xml:id="calculatorform-class-definition">
<db:title>CalculatorForm Class Definition</db:title>
<db:para>The <db:code>CalculatorForm</db:code> class uses the user interface described in the <db:code>calculatorform.ui</db:code> file. To access the form and its contents, we need to include the <db:code>ui_calculatorform.h</db:code> header file created by <db:code>uic</db:code> during the build process:</db:para>
<db:programlisting language="cpp">#include &quot;ui_calculatorform.h&quot;
</db:programlisting>
<db:para>We define the <db:code>CalculatorForm</db:code> class by subclassing <db:link xlink:href="qwidget.xml">QWidget</db:link> because the form itself is based on <db:link xlink:href="qwidget.xml">QWidget</db:link>:</db:para>
<db:programlisting language="cpp">class CalculatorForm : public QWidget
{
    Q_OBJECT

public:
    CalculatorForm(QWidget *parent = 0);

private slots:
    void on_inputSpinBox1_valueChanged(int value);
    void on_inputSpinBox2_valueChanged(int value);

private:
    Ui::CalculatorForm ui;
};
</db:programlisting>
<db:para>Apart from the constructor, the class contains two private slots that are named according to the auto-connection naming convention required by <db:code>uic</db:code>. The private <db:code>ui</db:code> member variable refers to the form, and is used to access the contents of the user interface.</db:para>
</db:section>
<db:section xml:id="calculatorform-class-implementation">
<db:title>CalculatorForm Class Implementation</db:title>
<db:para>The constructor simply calls the base class's constructor and sets up the form's user interface.</db:para>
<db:programlisting language="cpp">CalculatorForm::CalculatorForm(QWidget *parent)
    : QWidget(parent)
{
    ui.setupUi(this);
}
</db:programlisting>
<db:para>The user interface is set up with the <db:code>setupUI()</db:code> function. We pass <db:code>this</db:code> as the argument to this function to use the <db:code>CalculatorForm</db:code> widget itself as the container for the user interface.</db:para>
<db:para>To automatically connect signals from the spin boxes defined in the user interface, we use the naming convention that indicates which widgets and their signals in the user interface should be connected to each slot. The first slot is called whenever the spin box called &quot;inputSpinBox1&quot; in the user interface emits the <db:link xlink:href="qspinbox.xml#valueChanged">valueChanged</db:link>() signal:</db:para>
<db:programlisting language="cpp">void CalculatorForm::on_inputSpinBox1_valueChanged(int value)
{
    ui.outputWidget-&gt;setText(QString::number(value + ui.inputSpinBox2-&gt;value()));
}
</db:programlisting>
<db:para>When this occurs, we use the value supplied by the signal to update the output label by setting its new text directly. We access the output label and the other spin box via the class's private <db:code>ui</db:code> variable.</db:para>
<db:para>The second slot is called whenever the second spin box, called &quot;inputSpinBox2&quot;, emits the <db:link xlink:href="qspinbox.xml#valueChanged">valueChanged</db:link>() signal:</db:para>
<db:programlisting language="cpp">void CalculatorForm::on_inputSpinBox2_valueChanged(int value)
{
    ui.outputWidget-&gt;setText(QString::number(value + ui.inputSpinBox1-&gt;value()));
}
</db:programlisting>
<db:para>In this case, the value from the first spin box is read and combined with the value supplied by the signal. Again, the output label is updated directly via the <db:code>ui</db:code> variable.</db:para>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Files:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="calculatorform/calculatorform.cpp">calculatorform/calculatorform.cpp</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="calculatorform/calculatorform.h">calculatorform/calculatorform.h</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="calculatorform/calculatorform.pro">calculatorform/calculatorform.pro</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="calculatorform/calculatorform.ui">calculatorform/calculatorform.ui</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="calculatorform/main.cpp">calculatorform/main.cpp</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
</db:section></db:article>
