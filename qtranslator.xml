<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en_US">
<db:info>
<db:title>QTranslator Class</db:title>
<db:productname>QtCore</db:productname>
<db:titleabbrev>Qt Core Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>The <db:link xlink:href="qtranslator.xml">QTranslator</db:link> class provides internationalization support for text output.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:variablelist>
<db:varlistentry>
<db:term>Header</db:term>
<db:listitem>
<db:para>QTranslator</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Inherits</db:term>
<db:listitem>
<db:para><db:link xlink:href="qobject.xml" xlink:role="class">QObject</db:link></db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Group</db:term>
<db:listitem>
<db:para>QTranslator is part of <db:simplelist><db:member>i18n</db:member></db:simplelist>
</db:para>
</db:listitem>
</db:varlistentry>
</db:variablelist>
<db:section xml:id="details">
<db:title>Detailed Description</db:title>
<db:para>An object of this class contains a set of translations from a source language to a target language. <db:link xlink:href="qtranslator.xml">QTranslator</db:link> provides functions to look up translations in a translation file. Translation files are created using <db:link xlink:href="">Qt Linguist</db:link>.</db:para>
<db:para>The most common use of <db:link xlink:href="qtranslator.xml">QTranslator</db:link> is to: load a translation file, install it using <db:link xlink:href="qcoreapplication.xml#installTranslator">QCoreApplication::installTranslator</db:link>(), and use it via <db:link xlink:href="qobject.xml#tr">QObject::tr</db:link>(). Here's an example main() function using the <db:link xlink:href="qtranslator.xml">QTranslator</db:link>:</db:para>
<db:programlisting language="cpp">int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QTranslator translator;
    translator.load(&quot;hellotr_la&quot;);
    app.installTranslator(&amp;translator);

    QPushButton hello(QPushButton::tr(&quot;Hello world!&quot;));
    hello.resize(100, 30);

    hello.show();
    return app.exec();
}
</db:programlisting>
<db:para>Note that the translator must be created <db:emphasis>before</db:emphasis> the application's widgets.</db:para>
<db:para>Most applications will never need to do anything else with this class. The other functions provided by this class are useful for applications that work on translator files.</db:para>
<db:section xml:id="looking-up-translations">
<db:title>Looking up Translations</db:title>
<db:para>It is possible to look up a translation using <db:link xlink:href="qtranslator.xml#translate">translate</db:link>() (as <db:link xlink:href="qobject.xml#tr">tr</db:link>() and <db:link xlink:href="qcoreapplication.xml#translate">QCoreApplication::translate</db:link>() do). The <db:link xlink:href="qtranslator.xml#translate">translate</db:link>() function takes up to three parameters:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>The <db:emphasis>context</db:emphasis> - usually the class name for the <db:link xlink:href="qobject.xml#tr">tr</db:link>() caller.</db:para>
</db:listitem>
<db:listitem>
<db:para>The <db:emphasis>source text</db:emphasis> - usually the argument to <db:link xlink:href="qobject.xml#tr">tr</db:link>().</db:para>
</db:listitem>
<db:listitem>
<db:para>The <db:emphasis>disambiguation</db:emphasis> - an optional string that helps disambiguate different uses of the same text in the same context.</db:para>
</db:listitem>
</db:itemizedlist>
<db:para>For example, the &quot;Cancel&quot; in a dialog might have &quot;Anuluj&quot; when the program runs in Polish (in this case the source text would be &quot;Cancel&quot;). The context would (normally) be the dialog's class name; there would normally be no comment, and the translated text would be &quot;Anuluj&quot;.</db:para>
<db:para>But it's not always so simple. The Spanish version of a printer dialog with settings for two-sided printing and binding would probably require both &quot;Activado&quot; and &quot;Activada&quot; as translations for &quot;Enabled&quot;. In this case the source text would be &quot;Enabled&quot; in both cases, and the context would be the dialog's class name, but the two items would have disambiguations such as &quot;two-sided printing&quot; for one and &quot;binding&quot; for the other. The disambiguation enables the translator to choose the appropriate gender for the Spanish version, and enables Qt to distinguish between translations.</db:para>
</db:section>
<db:section xml:id="using-multiple-translations">
<db:title>Using Multiple Translations</db:title>
<db:para>Multiple translation files can be installed in an application. Translations are searched for in the reverse order in which they were installed, so the most recently installed translation file is searched for translations first and the earliest translation file is searched last. The search stops as soon as a translation containing a matching string is found.</db:para>
<db:para>This mechanism makes it possible for a specific translation to be &quot;selected&quot; or given priority over the others; simply uninstall the translator from the application by passing it to the <db:link xlink:href="qcoreapplication.xml#removeTranslator">QCoreApplication::removeTranslator</db:link>() function and reinstall it with <db:link xlink:href="qcoreapplication.xml#installTranslator">QCoreApplication::installTranslator</db:link>(). It will then be the first translation to be searched for matching strings.</db:para>
</db:section>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qcoreapplication.xml#installTranslator">QCoreApplication::installTranslator</db:link>()</db:member>
<db:member><db:link xlink:href="qcoreapplication.xml#removeTranslator">QCoreApplication::removeTranslator</db:link>()</db:member>
<db:member><db:link xlink:href="qobject.xml#tr">QObject::tr</db:link>()</db:member>
<db:member><db:link xlink:href="qcoreapplication.xml#translate">QCoreApplication::translate</db:link>()</db:member>
<db:member><db:link xlink:href="">I18N Example</db:link></db:member>
<db:member><db:link xlink:href="">Hello tr() Example</db:link></db:member>
<db:member><db:link xlink:href="">Arrow Pad Example</db:link></db:member>
<db:member><db:link xlink:href="">Troll Print Example</db:link></db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="member-function-documentation">
<db:title>Member Function Documentation</db:title>
<db:section xml:id="QTranslator">
<db:title>[explicit] QTranslator::QTranslator(QObject *<db:emphasis>parent</db:emphasis> = 0)</db:title>
<db:para>Constructs an empty message file object with parent <db:code role="parameter">parent</db:code> that is not connected to any file.</db:para>
</db:section>
<db:section xml:id="dtor.QTranslator">
<db:title>[virtual noexcept] QTranslator::~QTranslator()</db:title>
<db:para>Destroys the object and frees any allocated resources.</db:para>
</db:section>
<db:section xml:id="isEmpty">
<db:title>[virtual] bool QTranslator::isEmpty() const</db:title>
<db:para>Returns true if this translator is empty, otherwise returns false. This function works with stripped and unstripped translation files.</db:para>
</db:section>
<db:section xml:id="load">
<db:title>bool QTranslator::load(const QString &amp;<db:emphasis>filename</db:emphasis>, const QString &amp;<db:emphasis>directory</db:emphasis> = QString(), const QString &amp;<db:emphasis>search_delimiters</db:emphasis> = QString(), const QString &amp;<db:emphasis>suffix</db:emphasis> = QString())</db:title>
<db:para>Loads <db:code role="parameter">filename</db:code> + <db:code role="parameter">suffix</db:code> (&quot;.qm&quot; if the <db:code role="parameter">suffix</db:code> is not specified), which may be an absolute file name or relative to <db:code role="parameter">directory</db:code>. Returns true if the translation is successfully loaded; otherwise returns false.</db:para>
<db:para>If <db:code role="parameter">directory</db:code> is not specified, the directory of the application's executable is used (i.e., as <db:link xlink:href="qcoreapplication.xml#applicationDirPath">applicationDirPath</db:link>()).</db:para>
<db:para>The previous contents of this translator object are discarded.</db:para>
<db:para>If the file name does not exist, other file names are tried in the following order:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>File name without <db:code role="parameter">suffix</db:code> appended.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name with text after a character in <db:code role="parameter">search_delimiters</db:code> stripped (&quot;_.&quot; is the default for <db:code role="parameter">search_delimiters</db:code> if it is an empty string) and <db:code role="parameter">suffix</db:code>.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name stripped without <db:code role="parameter">suffix</db:code> appended.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name stripped further, etc.</db:para>
</db:listitem>
</db:orderedlist>
<db:para>For example, an application running in the fr_CA locale (French-speaking Canada) might call load(&quot;foo.fr_ca&quot;, &quot;/opt/foolib&quot;). load() would then try to open the first existing readable file from this list:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>/opt/foolib/foo.fr_ca.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr_ca</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo</db:para>
</db:listitem>
</db:orderedlist>
</db:section>
<db:section xml:id="load-1">
<db:title>[since 4.8] bool QTranslator::load(const QLocale &amp;<db:emphasis>locale</db:emphasis>, const QString &amp;<db:emphasis>filename</db:emphasis>, const QString &amp;<db:emphasis>prefix</db:emphasis> = QString(), const QString &amp;<db:emphasis>directory</db:emphasis> = QString(), const QString &amp;<db:emphasis>suffix</db:emphasis> = QString())</db:title>
<db:para>Loads <db:code role="parameter">filename</db:code> + <db:code role="parameter">prefix</db:code> + <db:link xlink:href="qlocale.xml#uiLanguages">ui language name</db:link> + <db:code role="parameter">suffix</db:code> (&quot;.qm&quot; if the <db:code role="parameter">suffix</db:code> is not specified), which may be an absolute file name or relative to <db:code role="parameter">directory</db:code>. Returns true if the translation is successfully loaded; otherwise returns false.</db:para>
<db:para>The previous contents of this translator object are discarded.</db:para>
<db:para>If the file name does not exist, other file names are tried in the following order:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>File name without <db:code role="parameter">suffix</db:code> appended.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name with ui language part after a &quot;_&quot; character stripped and <db:code role="parameter">suffix</db:code>.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name with ui language part stripped without <db:code role="parameter">suffix</db:code> appended.</db:para>
</db:listitem>
<db:listitem>
<db:para>File name with ui language part stripped further, etc.</db:para>
</db:listitem>
</db:orderedlist>
<db:para>For example, an application running in the <db:code role="parameter">locale</db:code> with the following <db:link xlink:href="qlocale.xml#uiLanguages">ui languages</db:link> - &quot;es&quot;, &quot;fr-CA&quot;, &quot;de&quot; might call load(<db:link xlink:href="qlocale.xml#system">QLocale::system</db:link>(), &quot;foo&quot;, &quot;.&quot;, &quot;/opt/foolib&quot;, &quot;.qm&quot;). <db:link xlink:href="qtranslator.xml#load">load</db:link>() would replace '-' (dash) with '_' (underscore) in the ui language and then try to open the first existing readable file from this list:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>/opt/foolib/foo.es.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.es</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr_CA.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr_CA</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.de.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.de</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.fr</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.qm</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo.</db:para>
</db:listitem>
<db:listitem>
<db:para>/opt/foolib/foo</db:para>
</db:listitem>
</db:orderedlist>
<db:para>On operating systems where file system is case sensitive, <db:link xlink:href="qtranslator.xml">QTranslator</db:link> also tries to load a lower-cased version of the locale name.</db:para>
<db:para>This function was introduced in Qt 4.8.</db:para>
</db:section>
<db:section xml:id="load-2">
<db:title>bool QTranslator::load(const uchar *<db:emphasis>data</db:emphasis>, int <db:emphasis>len</db:emphasis>, const QString &amp;<db:emphasis>directory</db:emphasis> = QString())</db:title>
<db:para>This function overloads <db:link xlink:href="qtranslator.xml#load">load</db:link>().</db:para>
<db:para>Loads the QM file data <db:code role="parameter">data</db:code> of length <db:code role="parameter">len</db:code> into the translator.</db:para>
<db:para>The data is not copied. The caller must be able to guarantee that <db:code role="parameter">data</db:code> will not be deleted or modified.</db:para>
<db:para><db:code role="parameter">directory</db:code> is only used to specify the base directory when loading the dependencies of a QM file. If the file does not have dependencies, this argument is ignored.</db:para>
</db:section>
<db:section xml:id="translate">
<db:title>[virtual] QString QTranslator::translate(const char *<db:emphasis>context</db:emphasis>, const char *<db:emphasis>sourceText</db:emphasis>, const char *<db:emphasis>disambiguation</db:emphasis> = 0, int <db:emphasis>n</db:emphasis> = -1) const</db:title>
<db:para>This function overloads translate().</db:para>
<db:para>Returns the translation for the key (<db:code role="parameter">context</db:code>, <db:code role="parameter">sourceText</db:code>, <db:code role="parameter">disambiguation</db:code>). If none is found, also tries (<db:code role="parameter">context</db:code>, <db:code role="parameter">sourceText</db:code>, &quot;&quot;). If that still fails, returns a null string.</db:para>
<db:para>If <db:code role="parameter">n</db:code> is not -1, it is used to choose an appropriate form for the translation (e.g. &quot;%n file found&quot; vs. &quot;%n files found&quot;).</db:para>
<db:para>If you need to programatically insert translations into a <db:link xlink:href="qtranslator.xml">QTranslator</db:link>, this function can be reimplemented.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qtranslator.xml#load">load</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
</db:section>
</db:article>
