<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>QTP0002</db:title>
<db:productname>QtCore</db:productname>
<db:edition>Qt 6.8.3 Reference Documentation</db:edition>
<db:titleabbrev>Qt Core Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>Target properties that specify Android-specific paths may contain generator expressions.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>Target properties that specify Android-specific paths may contain generator expressions.</db:para>
<db:para>This policy was introduced in Qt 6.6. It changes the processing of target properties that specify Android-specific paths:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="cmake-target-property-qt-qml-import-path.xml">QT_QML_IMPORT_PATH</db:link></db:para>
</db:listitem>
<db:listitem>
<db:para><db:link xlink:href="cmake-target-property-qt-qml-root-path.xml">QT_QML_ROOT_PATH</db:link></db:para>
</db:listitem>
<db:listitem>
<db:para><db:link xlink:href="cmake-target-property-qt-android-package-source-dir.xml">QT_ANDROID_PACKAGE_SOURCE_DIR</db:link></db:para>
</db:listitem>
<db:listitem>
<db:para><db:link xlink:href="cmake-target-property-qt-android-extra-plugins.xml">QT_ANDROID_EXTRA_PLUGINS</db:link></db:para>
</db:listitem>
<db:listitem>
<db:para><db:link xlink:href="cmake-target-property-qt-android-extra-libs.xml">QT_ANDROID_EXTRA_LIBS</db:link></db:para>
</db:listitem>
</db:itemizedlist>
<db:para>The OLD behavior of this policy doesn't allow generator expressions in the target properties that specify Android-specific paths but implicitly converts the specified paths to valid JSON strings.</db:para>
<db:para>The NEW behavior of this policy allows using generator expressions in the target properties that specify Android-specific paths, but they must evaluate to valid JSON strings.</db:para>
<db:para>The following value of the <db:link xlink:href="cmake-target-property-qt-android-extra-plugins.xml">QT_ANDROID_EXTRA_PLUGINS</db:link> property is converted to a valid JSON string if you set the policy to OLD, but leads to an error if the policy is set to NEW:</db:para>
<db:programlisting language="cpp" role="bad">set_target_properties(
    QT_ANDROID_EXTRA_PLUGINS &quot;\\path\\to\\MyPlugin.so&quot;
)
</db:programlisting>
<db:para>If the policy is set to NEW for the above example, the resulting JSON string in the deployment settings file will contain escaped symbols instead of path separators.</db:para>
<db:para>Generator expressions are only supported if the policy is set to NEW, so the OLD behavior generates a malformed deployment settings file with the following code:</db:para>
<db:programlisting language="cpp" role="bad">set_target_properties(
    QT_ANDROID_EXTRA_PLUGINS &quot;$&lt;TARGET_FILE_DIR:MyPlugin&gt;&quot;
)
</db:programlisting>
<db:para>This property value works as expected with both OLD and NEW policy values:</db:para>
<db:programlisting language="cpp" role="bad">set_target_properties(
    QT_ANDROID_EXTRA_PLUGINS &quot;/path/to/MyPlugin.so&quot;
)
</db:programlisting>
<db:note>
<db:para>The OLD behavior of a policy is deprecated, and may be removed in the future.</db:para>
</db:note>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qt-policy.xml">qt_policy</db:link></db:member>
<db:member><db:link xlink:href="">Qt CMake policies</db:link></db:member>
</db:simplelist>
</db:para>
</db:section>
</db:article>
