<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>ShaderProgram QML Type</db:title>
<db:productname>Qt3D</db:productname>
<db:edition>Qt 6.6.3 Reference Documentation</db:edition>
<db:titleabbrev>Qt 3D Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>Encapsulates a Shader Program.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:variablelist>
<db:varlistentry>
<db:term>Import Statement</db:term>
<db:listitem>
<db:para>import Qt3D.Render 2.6</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Instantiates:</db:term>
<db:listitem>
<db:para><db:link xlink:href="qt3drender-qshaderprogram.xml">QShaderProgram</db:link></db:para>
</db:listitem>
</db:varlistentry>
</db:variablelist>
<db:section xml:id="details">
<db:title>Detailed Description</db:title>
<db:para><db:link xlink:href="qml-qt3d-render-shaderprogram.xml">ShaderProgram</db:link> class encapsulates a shader program. A shader program consists of several different shaders, such as vertex and fragment shaders.</db:para>
<db:para>Qt3D will automatically populate a set of default uniforms if they are encountered during the shader instrospection phase.</db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th rowspan="1">
<db:para>Default Uniform</db:para>
</db:th>
<db:th colspan="2" rowspan="1">
<db:para>Associated Qt3D Parameter name</db:para>
</db:th>
<db:th colspan="3" rowspan="1">
<db:para>GLSL declaration</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ModelMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>modelMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 modelMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ViewMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>viewMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 viewMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>projectionMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 projectionMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ModelViewMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>modelView</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 modelView;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ViewProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>viewProjectionMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 viewProjectionMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ModelViewProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>modelViewProjection  mvp</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 modelViewProjection;  uniform mat4 mvp;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseModelMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseModelMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseModelMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseViewMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseViewMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseViewMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseProjectionMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseProjectionMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseModelViewMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseModelView</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseModelView;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseViewProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseViewProjectionMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseViewProjectionMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseModelViewProjectionMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseModelViewProjection</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseModelViewProjection;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ModelNormalMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>modelNormalMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat3 modelNormalMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ModelViewNormalMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>modelViewNormal</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat3 modelViewNormal;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>ViewportMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>viewportMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 viewportMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>InverseViewportMatrix</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>inverseViewportMatrix</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform mat4 inverseViewportMatrix;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>AspectRatio  (surface width / surface height)</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>aspectRatio</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform float aspectRatio;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>Exposure</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>exposure</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform float exposure;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>Gamma</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>gamma</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform float gamma;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>Time  (in nano seconds)</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>time</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform float time;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>EyePosition</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>eyePosition</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>uniform vec3 eyePosition;</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td rowspan="1">
<db:para>SkinningPalette</db:para>
</db:td>
<db:td colspan="2" rowspan="1">
<db:para>skinningPalette[0]</db:para>
</db:td>
<db:td colspan="3" rowspan="1">
<db:para>const int maxJoints = 100;  uniform mat4 skinningPalette[maxJoints];</db:para>
</db:td>
</db:tr>
</db:informaltable>
<db:section xml:id="rhi-support">
<db:title>RHI Support</db:title>
<db:para>When writing GLSL 450 shader code to use with Qt 3D's RHI backend, the default uniforms will be provided as 2 uniform buffer objects.</db:para>
<db:para>The binding locations for these is set to bindings 0 for RenderView uniforms and 1 for Command uniforms.</db:para>
<db:programlisting language="cpp" role="bad">#version 450 core

layout(location = 0) in vec3 vertexPosition;

layout(std140, binding = 0) uniform qt3d_render_view_uniforms {
  mat4 viewMatrix;
  mat4 projectionMatrix;
  mat4 uncorrectedProjectionMatrix;
  mat4 clipCorrectionMatrix;
  mat4 viewProjectionMatrix;
  mat4 inverseViewMatrix;
  mat4 inverseProjectionMatrix;
  mat4 inverseViewProjectionMatrix;
  mat4 viewportMatrix;
  mat4 inverseViewportMatrix;
  vec4 textureTransformMatrix;
  vec3 eyePosition;
  float aspectRatio;
  float gamma;
  float exposure;
  float time;
  float yUpInNDC;
  float yUpInFBO;
};

layout(std140, binding = 1) uniform qt3d_command_uniforms {
  mat4 modelMatrix;
  mat4 inverseModelMatrix;
  mat4 modelViewMatrix;
  mat3 modelNormalMatrix;
  mat4 inverseModelViewMatrix;
  mat4 modelViewProjection;
  mat4 inverseModelViewProjectionMatrix;
};

void main()
{
    gl_Position = (projectionMatrix * viewMatrix * modelMatrix * vertexPosition);
}
</db:programlisting>
<db:para>For user defined uniform buffer object, use binding starting at 2 or auto to let Qt 3D work out the binding automatically. Make sure to remain consistent between the different shader stages.</db:para>
<db:programlisting language="cpp" role="bad">#version 450 core

layout(std140, binding = auto) uniform my_uniforms {
  vec4 myColor;
};

layout(location=0) out vec4 fragColor;

void main()
{
    fragColor = myColor;
}
</db:programlisting>
<db:para>There is no change involved when it comes to feeding values to uniforms.</db:para>
<db:para>For the above example, setting myColor could be done with:</db:para>
<db:programlisting language="cpp" role="bad">Parameter { name: &quot;myColor&quot;; value: &quot;blue&quot; }
</db:programlisting>
<db:para>Textures still have to be defined as standalone uniforms.</db:para>
<db:programlisting language="cpp" role="bad">#version 450 core

layout(binding=0) uniform sampler2D source;

layout(location=0) out vec4 fragColor;

void main()
{
    fragColor = texture(source, vec2(0.5, 0.5));
}
</db:programlisting>
</db:section>
</db:section>
<db:section xml:id="property-documentation">
<db:title>Property Documentation</db:title>
<db:section xml:id="computeShaderCode-prop">
<db:title>computeShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>computeShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the compute shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="computeShaderGraph-prop">
<db:title>computeShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>computeShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the compute shader graph used by this shader program builder.</db:para>
</db:section>
<db:section xml:id="format-prop">
<db:title>format : enumeration</db:title>
<db:fieldsynopsis>
<db:type>enumeration</db:type>
<db:varname>format</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the format of the code provided on the <db:link xlink:href="qml-qt3d-render-shaderprogram.xml">ShaderProgram</db:link>. The default is <db:link xlink:href="qml-qt3d-render-shaderprogram.xml">ShaderProgram</db:link>.GLSL</db:para>
</db:section>
<db:section xml:id="fragmentShaderCode-prop">
<db:title>fragmentShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>fragmentShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the fragment shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="fragmentShaderGraph-prop">
<db:title>fragmentShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>fragmentShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the fragment shader graph used by this shader program builder.</db:para>
</db:section>
<db:section xml:id="geometryShaderCode-prop">
<db:title>geometryShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>geometryShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the geometry shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="geometryShaderGraph-prop">
<db:title>geometryShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>geometryShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the geometry shader graph used by this shader program builder.</db:para>
</db:section>
<db:section xml:id="log-prop">
<db:title>[read-only] log : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>log</db:varname>
<db:modifier>[read-only]</db:modifier>

<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the log of the current shader program. This is useful to diagnose a compilation failure of the shader program.</db:para>
</db:section>
<db:section xml:id="status-prop">
<db:title>[read-only] status : enumeration</db:title>
<db:fieldsynopsis>
<db:type>enumeration</db:type>
<db:varname>status</db:varname>
<db:modifier>[read-only]</db:modifier>

<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the status of the current shader program.</db:para>
</db:section>
<db:section xml:id="tessellationControlShaderCode-prop">
<db:title>tessellationControlShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>tessellationControlShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the tesselation control shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="tessellationControlShaderGraph-prop">
<db:title>tessellationControlShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>tessellationControlShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the tesselation control shader graph used by this shader program builder.</db:para>
</db:section>
<db:section xml:id="tessellationEvaluationShaderCode-prop">
<db:title>tessellationEvaluationShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>tessellationEvaluationShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the tesselation evaluation shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="tessellationEvaluationShaderGraph-prop">
<db:title>tessellationEvaluationShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>tessellationEvaluationShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the tesselation evaluation shader graph used by this shader program builder.</db:para>
</db:section>
<db:section xml:id="vertexShaderCode-prop">
<db:title>vertexShaderCode : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>vertexShaderCode</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the vertex shader code used by this shader program.</db:para>
</db:section>
<db:section xml:id="vertexShaderGraph-prop">
<db:title>vertexShaderGraph : string</db:title>
<db:fieldsynopsis>
<db:type>string</db:type>
<db:varname>vertexShaderGraph</db:varname>
<db:modifier>writable</db:modifier>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:fieldsynopsis>
<db:para>Holds the URL to the vertex shader graph used by this shader program builder.</db:para>
</db:section>
</db:section>
<db:section xml:id="method-documentation">
<db:title>Method Documentation</db:title>
<db:section xml:id="loadSource-method">
<db:title>string loadSource(url <db:emphasis>sourceUrl</db:emphasis>)</db:title>
<db:para>Returns the shader code loaded from <db:code role="parameter">sourceUrl</db:code>.</db:para>
</db:section>
</db:section>
</db:article>
