<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Extension Example</db:title>
<db:productname>QtWidgets</db:productname>
<db:edition>Qt 5.5.1 Reference Documentation</db:edition>
<db:titleabbrev>Qt Widgets Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>The Extension example shows how to add an extension to a QDialog using the QAbstractButton::toggled() signal and the QWidget::setVisible() slot.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:mediaobject>
<db:alt>Screenshot of the Extension example</db:alt>
<db:imageobject>
<db:imagedata fileref="images/extension-example.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>The Extension application is a dialog that allows the user to perform a simple search as well as a more advanced search.</db:para>
<db:para>The simple search has two options: <db:guilabel>Match case</db:guilabel> and <db:guilabel>Search from start</db:guilabel>. The advanced search options include the possibilities to search for <db:guilabel>Whole words</db:guilabel>, <db:guilabel>Search backward</db:guilabel> and <db:guilabel>Search selection</db:guilabel>. Only the simple search is visible when the application starts. The advanced search options are located in the application's extension part, and can be made visible by pressing the <db:guilabel>More</db:guilabel> button:</db:para>
<db:mediaobject>
<db:alt>Screenshot of the Extension example</db:alt>
<db:imageobject>
<db:imagedata fileref="images/extension_more.png"/>
</db:imageobject>
</db:mediaobject>
<db:section xml:id="finddialog-class-definition">
<db:title>FindDialog Class Definition</db:title>
<db:para>The <db:code>FindDialog</db:code> class inherits QDialog. The QDialog class is the base class of dialog windows. A dialog window is a top-level window mostly used for short-term tasks and brief communications with the user.</db:para>
<db:programlisting language="cpp">class FindDialog : public QDialog
{
    Q_OBJECT

public:
    FindDialog(QWidget *parent = 0);

private:
    QLabel *label;
    QLineEdit *lineEdit;
    QCheckBox *caseCheckBox;
    QCheckBox *fromStartCheckBox;
    QCheckBox *wholeWordsCheckBox;
    QCheckBox *searchSelectionCheckBox;
    QCheckBox *backwardCheckBox;
    QDialogButtonBox *buttonBox;
    QPushButton *findButton;
    QPushButton *moreButton;
    QWidget *extension;
};
</db:programlisting>
<db:para>The <db:code>FindDialog</db:code> widget is the main application widget, and displays the application's search options and controlling buttons.</db:para>
<db:para>In addition to a constructor, we declare the several child widgets: We need a QLineEdit with an associated QLabel to let the user type a word to search for, we need several QCheckBoxes to facilitate the search options, and we need three QPushButtons: the <db:guilabel>Find</db:guilabel> button to start a search and the <db:guilabel>More</db:guilabel> button to enable an advanced search. Finally, we need a QWidget representing the application's extension part.</db:para>
</db:section>
<db:section xml:id="finddialog-class-implementation">
<db:title>FindDialog Class Implementation</db:title>
<db:para>In the constructor we first create the standard child widgets for the simple search: the QLineEdit with the associated QLabel, two of the QCheckBoxes and all the QPushButtons.</db:para>
<db:programlisting language="cpp">FindDialog::FindDialog(QWidget *parent)
    : QDialog(parent)
{
    label = new QLabel(tr(&quot;Find &amp;what:&quot;));
    lineEdit = new QLineEdit;
    label-&gt;setBuddy(lineEdit);

    caseCheckBox = new QCheckBox(tr(&quot;Match &amp;case&quot;));
    fromStartCheckBox = new QCheckBox(tr(&quot;Search from &amp;start&quot;));
    fromStartCheckBox-&gt;setChecked(true);

    findButton = new QPushButton(tr(&quot;&amp;Find&quot;));
    findButton-&gt;setDefault(true);

    moreButton = new QPushButton(tr(&quot;&amp;More&quot;));
    moreButton-&gt;setCheckable(true);
</db:programlisting>
<db:para>We give the options and buttons a shortcut key using the &amp; character. In the <db:guilabel>Find what</db:guilabel> option's case, we also need to use the QLabel::setBuddy() function to make the shortcut key work as expected; then, when the user presses the shortcut key indicated by the label, the keyboard focus is transferred to the label's buddy widget, the QLineEdit.</db:para>
<db:para>We set the <db:guilabel>Find</db:guilabel> button's default property to true, using the QPushButton::setDefault() function. Then the push button will be pressed if the user presses the Enter (or Return) key. Note that a QDialog can only have one default button.</db:para>
<db:programlisting language="cpp">    extension = new QWidget;

    wholeWordsCheckBox = new QCheckBox(tr(&quot;&amp;Whole words&quot;));
    backwardCheckBox = new QCheckBox(tr(&quot;Search &amp;backward&quot;));
    searchSelectionCheckBox = new QCheckBox(tr(&quot;Search se&amp;lection&quot;));
</db:programlisting>
<db:para>Then we create the extension widget, and the QCheckBoxes associated with the advanced search options.</db:para>
<db:programlisting language="cpp">    buttonBox = new QDialogButtonBox(Qt::Vertical);
    buttonBox-&gt;addButton(findButton, QDialogButtonBox::ActionRole);
    buttonBox-&gt;addButton(moreButton, QDialogButtonBox::ActionRole);

    connect(moreButton, SIGNAL(toggled(bool)), extension, SLOT(setVisible(bool)));

    QVBoxLayout *extensionLayout = new QVBoxLayout;
    extensionLayout-&gt;setMargin(0);
    extensionLayout-&gt;addWidget(wholeWordsCheckBox);
    extensionLayout-&gt;addWidget(backwardCheckBox);
    extensionLayout-&gt;addWidget(searchSelectionCheckBox);
    extension-&gt;setLayout(extensionLayout);
</db:programlisting>
<db:para>Now that the extension widget is created, we can connect the <db:guilabel>More</db:guilabel> button's <db:link xlink:href="">toggled()</db:link> signal to the extension widget's <db:link xlink:href="">setVisible()</db:link> slot.</db:para>
<db:para>The QAbstractButton::toggled() signal is emitted whenever a checkable button changes its state. The signal's argument is true if the button is checked, or false if the button is unchecked. The QWidget::setVisible() slot sets the widget's visible status. If the status is true the widget is shown, otherwise the widget is hidden.</db:para>
<db:para>Since we made the <db:guilabel>More</db:guilabel> button checkable when we created it, the connection makes sure that the extension widget is shown depending on the state of <db:guilabel>More</db:guilabel> button.</db:para>
<db:para>We also put the check boxes associated with the advanced search options into a layout we install on the extension widget.</db:para>
<db:programlisting language="cpp">    QHBoxLayout *topLeftLayout = new QHBoxLayout;
    topLeftLayout-&gt;addWidget(label);
    topLeftLayout-&gt;addWidget(lineEdit);

    QVBoxLayout *leftLayout = new QVBoxLayout;
    leftLayout-&gt;addLayout(topLeftLayout);
    leftLayout-&gt;addWidget(caseCheckBox);
    leftLayout-&gt;addWidget(fromStartCheckBox);

    QGridLayout *mainLayout = new QGridLayout;
    mainLayout-&gt;setSizeConstraint(QLayout::SetFixedSize);
    mainLayout-&gt;addLayout(leftLayout, 0, 0);
    mainLayout-&gt;addWidget(buttonBox, 0, 1);
    mainLayout-&gt;addWidget(extension, 1, 0, 1, 2);
    mainLayout-&gt;setRowStretch(2, 1);

    setLayout(mainLayout);

    setWindowTitle(tr(&quot;Extension&quot;));
</db:programlisting>
<db:para>Before we create the main layout, we create several child layouts for the widgets: First we align the QLabel and its buddy, the QLineEdit, using a QHBoxLayout. Then we vertically align the QLabel and QLineEdit with the check boxes associated with the simple search, using a QVBoxLayout. We also create a QVBoxLayout for the buttons. In the end we lay out the two latter layouts and the extension widget using a QGridLayout.</db:para>
<db:programlisting language="cpp">    extension-&gt;hide();
}
</db:programlisting>
<db:para>Finally, we hide the extension widget using the QWidget::hide() function, making the application only show the simple search options when it starts. When the user wants to access the advanced search options, the dialog only needs to change the visibility of the extension widget. Qt's layout management takes care of the dialog's appearance.</db:para>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Files:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="dialogs/extension/extension.pro">dialogs/extension/extension.pro</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="dialogs/extension/finddialog.cpp">dialogs/extension/finddialog.cpp</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="dialogs/extension/finddialog.h">dialogs/extension/finddialog.h</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="dialogs/extension/main.cpp">dialogs/extension/main.cpp</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
</db:section></db:article>
