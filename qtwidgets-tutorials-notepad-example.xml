<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Getting Started Programming with Qt Widgets</db:title>
<db:productname>QtWidgets</db:productname>
<db:edition>Qt 5.12.12 Reference Documentation</db:edition>
<db:titleabbrev>Qt Widgets Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>A tutorial for Qt Widgets based on a notepad application.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>In this topic, we teach basic Qt knowledge by implementing a simple Notepad application using C++ and the <db:link xlink:href="qtwidgets-index.xml">Qt Widgets</db:link> module. The application is a small text editor which allows you to create a text file, save it, print it, or reopen and edit it again. You can also set the font to be used.</db:para>
<db:mediaobject>
<db:alt>&quot;Notepad application&quot;</db:alt>
<db:imageobject>
<db:imagedata fileref="images/notepad1.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>You can find the final Notepad source files in the qtdoc repository in the tutorials/notepad directory. You can either fetch the Qt 5 sources from Qt Project or install them as part of Qt 5. The application is also available in the example list of Qt Creator's Welcome mode.</db:para>
<db:section xml:id="creating-the-notepad-project">
<db:title>Creating the Notepad Project</db:title>
<db:para>Setting up a new project in Qt Creator is aided by a wizard that guides you step-by-step through the project creation process. The wizard prompts you to enter the settings needed for that particular type of project and creates the project for you.</db:para>
<db:mediaobject>
<db:alt>&quot;Qt Creator New File or Project dialog&quot;</db:alt>
<db:imageobject>
<db:imagedata fileref="images/notepad2.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>To create the Notepad project, select <db:emphasis role="bold">File</db:emphasis> &gt; <db:emphasis role="bold">New File or Project</db:emphasis> &gt; <db:emphasis role="bold">Applications</db:emphasis> &gt; <db:emphasis role="bold">Qt Widgets Application</db:emphasis> &gt; <db:emphasis role="bold">Choose</db:emphasis>, and follow the instructions of the wizard. In the <db:emphasis role="bold">Class Information</db:emphasis> dialog, type <db:emphasis role="bold">Notepad</db:emphasis> as the class name and select <db:emphasis role="bold">QMainWindow</db:emphasis> as the base class.</db:para>
<db:mediaobject>
<db:alt>&quot;Class Information Dialog&quot;</db:alt>
<db:imageobject>
<db:imagedata fileref="images/notepad3.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>The <db:emphasis role="bold">Qt Widgets Application</db:emphasis> wizard creates a project that contains a main source file and a set of files that specify a user interface (Notepad widget):</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>notepad.pro - the project file.</db:para>
</db:listitem>
<db:listitem>
<db:para>main.cpp - the main source file for the application.</db:para>
</db:listitem>
<db:listitem>
<db:para>notepad.cpp - the source file of the notepad class of the Notepad widget.</db:para>
</db:listitem>
<db:listitem>
<db:para>notepad.h - the header file of the notepad class for the Notepad widget.</db:para>
</db:listitem>
<db:listitem>
<db:para>notepad.ui - the UI form for the Notepad widget.</db:para>
</db:listitem>
</db:itemizedlist>
<db:para>The .cpp, .h, and .ui files come with the necessary boiler plate code for you to be able to build and run the project. The .pro file is complete. We will take a closer look at the file contents in the following sections.</db:para>
<db:para><db:emphasis role="bold">Learn More</db:emphasis></db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>About</db:para>
</db:th>
<db:th>
<db:para>Here</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>Using Qt Creator</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="http://doc.qt.io/qtcreator/index.html">Qt Creator</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Creating other kind of applications with Qt Creator</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="http://doc.qt.io/qtcreator/creator-tutorials.html">Qt Creator Tutorials</db:link></db:para>
</db:td>
</db:tr>
</db:informaltable>
</db:section>
<db:section xml:id="main-source-file">
<db:title>Main Source File</db:title>
<db:para>The wizard generates the following code in the main.cpp file:</db:para>
<db:programlisting language="cpp">#include &quot;notepad.h&quot;
#include &amp;lt;QApplication&amp;gt;

int main(int argc, char *argv[])
{
    QApplication EditorApp(argc, argv);
    Notepad Editor;
    Editor.show();

    return EditorApp.exec();
}
</db:programlisting>
<db:para>We will go through the code line by line. The following lines include the header files for the Notepad widget and <db:link xlink:href="qapplication.xml">QApplication</db:link>. All Qt classes have a header file named after them.</db:para>
<db:programlisting language="cpp">#include &quot;notepad.h&quot;
#include &amp;lt;QApplication&amp;gt;
</db:programlisting>
<db:para>The following line defines the main function that is the entry point for all C and C++ based applications:</db:para>
<db:programlisting language="cpp">int main(int argc, char *argv[])
</db:programlisting>
<db:para>The following line creates a <db:link xlink:href="qapplication.xml">QApplication</db:link> object. This object manages application-wide resources and is necessary to run any Qt program that uses Qt Widgets. It constructs an application object with argc command line arguments run in argv. (For GUI applications that do not use Qt Widgets, you can use <db:link xlink:href="qguiapplication.xml">QGuiApplication</db:link> instead.)</db:para>
<db:programlisting language="cpp">    QApplication EditorApp(argc, argv);
</db:programlisting>
<db:para>The following line creates the Notepad object. This is the object for which the wizard created the class and the UI file. The user interface contains visual elements that are called widgets in Qt. Examples of widgets are text edits, scroll bars, labels, and radio buttons. A widget can also be a container for other widgets; a dialog or a main application window, for example.</db:para>
<db:programlisting language="cpp">    Notepad Editor;
</db:programlisting>
<db:para>The following line shows the Notepad widget on the screen in its own window. Widgets can also function as containers. An example of this is <db:link xlink:href="qmainwindow.xml">QMainWindow</db:link> which often contains several types of widgets. Widgets are not visible by default; the function <db:link xlink:href="qwidget.xml#show">show</db:link>() makes the widget visible.</db:para>
<db:programlisting language="cpp">    Editor.show();
</db:programlisting>
<db:para>The following line makes the <db:link xlink:href="qapplication.xml">QApplication</db:link> enter its event loop. When a Qt application is running, events are generated and sent to the widgets of the application. Examples of events are mouse presses and key strokes.</db:para>
<db:programlisting language="cpp">    return EditorApp.exec();
</db:programlisting>
<db:para><db:emphasis role="bold">Learn More</db:emphasis></db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>About</db:para>
</db:th>
<db:th>
<db:para>Here</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>Widgets and Window Geometry</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="application-windows.xml">Window and Dialog Widgets</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Events and event handling</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="eventsandfilters.xml">The Event System</db:link></db:para>
</db:td>
</db:tr>
</db:informaltable>
</db:section>
<db:section xml:id="designing-a-ui">
<db:title>Designing a UI</db:title>
<db:para>The wizard generates a user interface definition in XML format: notepad.ui. When you open the notepad.ui file in Qt Creator, it automatically opens in the integrated Qt Designer.</db:para>
<db:para>When you build the application, Qt Creator launches the Qt <db:link xlink:href="uic.xml">User Interface Compiler (uic)</db:link> that reads the .ui file and creates a corresponding C++ header file, ui_notepad.h.</db:para>
<db:section xml:id="using-qt-designer">
<db:title>Using Qt Designer</db:title>
<db:para>The wizard creates an application that uses a <db:link xlink:href="qmainwindow.xml">QMainWindow</db:link>. It has its own layout to which you can add a menu bar, dock widgets, toolbars, and a status bar. The center area can be occupied by any kind of widget. The wizard places the Notepad widget there.</db:para>
<db:para>To add widgets in Qt Designer:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>In the Qt Creator <db:emphasis role="bold">Editor</db:emphasis> mode, double-click the notepad.ui file in the <db:emphasis role="bold">Projects</db:emphasis> view to launch the file in the integrated Qt Designer.</db:para>
</db:listitem>
<db:listitem>
<db:para>Drag and drop widgets Text Edit (<db:link xlink:href="qtextedit.xml">QTextEdit</db:link>) to the form.</db:para>
</db:listitem>
<db:listitem>
<db:para>Press <db:emphasis role="bold">Ctrl+A</db:emphasis> (or <db:emphasis role="bold">Cmd+A</db:emphasis>) to select the widgets and click <db:emphasis role="bold">Lay out Vertically</db:emphasis> (or press <db:emphasis role="bold">Ctrl+L</db:emphasis>) to apply a vertical layout (<db:link xlink:href="qvboxlayout.xml">QVBoxLayout</db:link>).</db:para>
</db:listitem>
<db:listitem>
<db:para>Press <db:emphasis role="bold">Ctrl+S</db:emphasis> (or <db:emphasis role="bold">Cmd+S</db:emphasis>) to save your changes.</db:para>
</db:listitem>
</db:orderedlist>
<db:para>The UI now looks as follows in Qt Designer:</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/notepad4.png"/>
</db:imageobject>
</db:mediaobject>
<db:para>You can view the generated XML file in the code editor:</db:para>
<db:programlisting language="cpp">&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;ui version=&quot;4.0&quot;&amp;gt;
 &amp;lt;class&amp;gt;Notepad&amp;lt;/class&amp;gt;
 &amp;lt;widget class=&quot;QMainWindow&quot; name=&quot;Notepad&quot;&amp;gt;
  &amp;lt;property name=&quot;geometry&quot;&amp;gt;
   &amp;lt;rect&amp;gt;
    &amp;lt;x&amp;gt;0&amp;lt;/x&amp;gt;
    &amp;lt;y&amp;gt;0&amp;lt;/y&amp;gt;
    &amp;lt;width&amp;gt;800&amp;lt;/width&amp;gt;
    &amp;lt;height&amp;gt;400&amp;lt;/height&amp;gt;
   &amp;lt;/rect&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property name=&quot;windowTitle&quot;&amp;gt;
   &amp;lt;string&amp;gt;Notepad&amp;lt;/string&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;widget class=&quot;QWidget&quot; name=&quot;centralWidget&quot;&amp;gt;
   &amp;lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout&quot;&amp;gt;
    &amp;lt;item&amp;gt;
     &amp;lt;widget class=&quot;QTextEdit&quot; name=&quot;textEdit&quot;/&amp;gt;
    &amp;lt;/item&amp;gt;
   &amp;lt;/layout&amp;gt;
  &amp;lt;/widget&amp;gt;
  &amp;lt;widget class=&quot;QMenuBar&quot; name=&quot;menuBar&quot;&amp;gt;
    ...
</db:programlisting>
<db:para>The following line contains the XML declaration, which specifies the XML version and character encoding used in the document:</db:para>
<db:programlisting language="cpp">&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
</db:programlisting>
<db:para>The rest of the file specifies an ui element that defines a Notepad widget:</db:para>
<db:programlisting language="cpp">&amp;lt;ui version=&quot;4.0&quot;&amp;gt;
</db:programlisting>
<db:para>The UI file is used together with the header and source file of the Notepad class. We will look at the rest of the UI file in the later sections.</db:para>
</db:section>
<db:section xml:id="notepad-header-file">
<db:title>Notepad Header File</db:title>
<db:para>The wizard generated a header file for the Notepad class that has the necessary #includes, a constructor, a destructor, and the Ui object. The file looks as follows:</db:para>
<db:programlisting language="cpp">#include &amp;lt;QMainWindow&amp;gt;

namespace Ui {
class Notepad;
}


class Notepad : public QMainWindow
{
    Q_OBJECT

public:
    explicit Notepad(QWidget *parent = 0);
    ~Notepad();

private slots:
    void newDocument();

    void open();

    void save();

    void saveAs();

    void print();

    void exit();

    void copy();

    void cut();

    void paste();

    void undo();

    void redo();

    void selectFont();

    void setFontBold(bool bold);

    void setFontUnderline(bool underline);

    void setFontItalic(bool italic);

    void about();

private:
    Ui::Notepad *ui;
    QString currentFile;
};
</db:programlisting>
<db:para>The following line includes <db:link xlink:href="qmainwindow.xml">QMainWindow</db:link> that provides a main application window:</db:para>
<db:programlisting language="cpp">#include &amp;lt;QMainWindow&amp;gt;
</db:programlisting>
<db:para>The following lines declare the Notepad class in the Ui namespace, which is the standard namespace for the UI classes generated from .ui files by the uic tool:</db:para>
<db:programlisting language="cpp">namespace Ui {
class Notepad;
}
</db:programlisting>
<db:para>The class declaration contains the Q_OBJECT macro. It must come first in the class definition, and declares our class as a <db:link xlink:href="qobject.xml">QObject</db:link>. Naturally, it must also inherit from <db:link xlink:href="qobject.xml">QObject</db:link>. A <db:link xlink:href="qobject.xml">QObject</db:link> adds several abilities to a normal C++ class. Notably, the class name and slot names can be queried at runtime. It is also possible to query a slot's parameter types and invoke it.</db:para>
<db:programlisting language="cpp">class Notepad : public QMainWindow
{
    Q_OBJECT
</db:programlisting>
<db:para>The following lines declare a constructor that has a default argument called parent. The value 0 indicates that the widget has no parent (it is a top-level widget).</db:para>
<db:programlisting language="cpp">public:
    explicit Notepad(QWidget *parent = 0);
</db:programlisting>
<db:para>The following line declares a virtual destructor to free the resources that were acquired by the object during its life-cycle. According to the C++ naming convention, destructors have the same name as the class they are associated with, prefixed with a tilde (~). In <db:link xlink:href="qobject.xml">QObject</db:link>, destructors are virtual to ensure that the destructors of derived classes are invoked properly when an object is deleted through a pointer-to-base-class.</db:para>
<db:programlisting language="cpp">    ~Notepad();
</db:programlisting>
<db:para>The following lines declare a member variable which is a pointer to the Notepad UI class. A member variable is associated with a specific class, and accessible for all its methods.</db:para>
<db:programlisting language="cpp">private:
    Ui::Notepad *ui;
    QString currentFile;
</db:programlisting>
</db:section>
<db:section xml:id="notepad-source-file">
<db:title>Notepad Source File</db:title>
<db:para>The source file that the wizard generated for the Notepad class looks as follows:</db:para>
<db:programlisting language="cpp">#include &quot;notepad.h&quot;
#include &quot;ui_notepad.h&quot;

Notepad::Notepad(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::Notepad)
{
    ui-&amp;gt;setupUi(this);
    this-&amp;gt;setCentralWidget(ui-&amp;gt;textEdit);

    connect(ui-&amp;gt;actionNew, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::newDocument);
    connect(ui-&amp;gt;actionOpen, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::open);
    connect(ui-&amp;gt;actionSave, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::save);
    connect(ui-&amp;gt;actionSave_as, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::saveAs);
    connect(ui-&amp;gt;actionPrint, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::print);
    connect(ui-&amp;gt;actionExit, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::exit);
    connect(ui-&amp;gt;actionCopy, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::copy);
    connect(ui-&amp;gt;actionCut, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::cut);
    connect(ui-&amp;gt;actionPaste, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::paste);
    connect(ui-&amp;gt;actionUndo, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::undo);
    connect(ui-&amp;gt;actionRedo, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::redo);
    connect(ui-&amp;gt;actionFont, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::selectFont);
    connect(ui-&amp;gt;actionBold, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontBold);
    connect(ui-&amp;gt;actionUnderline, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontUnderline);
    connect(ui-&amp;gt;actionItalic, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontItalic);
    connect(ui-&amp;gt;actionAbout, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::about);

// Disable menu actions for unavailable features
#if !QT_CONFIG(printer)
    ui-&amp;gt;actionPrint-&amp;gt;setEnabled(false);
#endif

#if !QT_CONFIG(clipboard)
    ui-&amp;gt;actionCut-&amp;gt;setEnabled(false);
    ui-&amp;gt;actionCopy-&amp;gt;setEnabled(false);
    ui-&amp;gt;actionPaste-&amp;gt;setEnabled(false);
#endif
}

Notepad::~Notepad()
{
    delete ui;
}

void Notepad::newDocument()
{
    currentFile.clear();
    ui-&amp;gt;textEdit-&amp;gt;setText(QString());
}

void Notepad::open()
{
    QString fileName = QFileDialog::getOpenFileName(this, &quot;Open the file&quot;);
    QFile file(fileName);
    currentFile = fileName;
    if (!file.open(QIODevice::ReadOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot open file: &quot; + file.errorString());
        return;
    }
    setWindowTitle(fileName);
    QTextStream in(&amp;amp;file);
    QString text = in.readAll();
    ui-&amp;gt;textEdit-&amp;gt;setText(text);
    file.close();
}

void Notepad::save()
{
    QString fileName;
    // If we don't have a filename from before, get one.
    if (currentFile.isEmpty()) {
        fileName = QFileDialog::getSaveFileName(this, &quot;Save&quot;);
        currentFile = fileName;
    } else {
        fileName = currentFile;
    }
    QFile file(fileName);
    if (!file.open(QIODevice::WriteOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot save file: &quot; + file.errorString());
        return;
    }
    setWindowTitle(fileName);
    QTextStream out(&amp;amp;file);
    QString text = ui-&amp;gt;textEdit-&amp;gt;toPlainText();
    out &amp;lt;&amp;lt; text;
    file.close();
}

void Notepad::saveAs()
{
    QString fileName = QFileDialog::getSaveFileName(this, &quot;Save as&quot;);
    QFile file(fileName);

    if (!file.open(QFile::WriteOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot save file: &quot; + file.errorString());
        return;
    }
    currentFile = fileName;
    setWindowTitle(fileName);
    QTextStream out(&amp;amp;file);
    QString text = ui-&amp;gt;textEdit-&amp;gt;toPlainText();
    out &amp;lt;&amp;lt; text;
    file.close();
}

void Notepad::print()
{
#if QT_CONFIG(printer)
    QPrinter printDev;
#if QT_CONFIG(printdialog)
    QPrintDialog dialog(&amp;amp;printDev, this);
    if (dialog.exec() == QDialog::Rejected)
        return;
#endif // QT_CONFIG(printdialog)
    ui-&amp;gt;textEdit-&amp;gt;print(&amp;amp;printDev);
#endif // QT_CONFIG(printer)
}

void Notepad::exit()
{
    QCoreApplication::quit();
}

void Notepad::copy()
{
#if QT_CONFIG(clipboard)
    ui-&amp;gt;textEdit-&amp;gt;copy();
#endif
}

void Notepad::cut()
{
#if QT_CONFIG(clipboard)
    ui-&amp;gt;textEdit-&amp;gt;cut();
#endif
}

void Notepad::paste()
{
#if QT_CONFIG(clipboard)
    ui-&amp;gt;textEdit-&amp;gt;paste();
#endif
}

void Notepad::undo()
{
     ui-&amp;gt;textEdit-&amp;gt;undo();
}

void Notepad::redo()
{
    ui-&amp;gt;textEdit-&amp;gt;redo();
}

void Notepad::selectFont()
{
    bool fontSelected;
    QFont font = QFontDialog::getFont(&amp;amp;fontSelected, this);
    if (fontSelected)
        ui-&amp;gt;textEdit-&amp;gt;setFont(font);
}
</db:programlisting>
<db:para>The following lines include the Notepad class header file that was generated by the wizard and the UI header file that was generated by the uic tool:</db:para>
<db:programlisting language="cpp">#include &quot;notepad.h&quot;
#include &quot;ui_notepad.h&quot;
</db:programlisting>
<db:para>The following line defines the Notepad constructor:</db:para>
<db:programlisting language="cpp">Notepad::Notepad(QWidget *parent) :
</db:programlisting>
<db:para>The following line calls the <db:link xlink:href="qmainwindow.xml">QMainWindow</db:link> constructor, which is the base class for the Notepad class:</db:para>
<db:programlisting language="cpp">    QMainWindow(parent),
</db:programlisting>
<db:para>The following line creates the UI class instance and assigns it to the ui member:</db:para>
<db:programlisting language="cpp">    ui(new Ui::Notepad)
</db:programlisting>
<db:para>The following line sets up the UI:</db:para>
<db:programlisting language="cpp">    ui-&amp;gt;setupUi(this);
</db:programlisting>
<db:para>In the destructor, we delete the ui:</db:para>
<db:programlisting language="cpp">Notepad::~Notepad()
{
    delete ui;
}
</db:programlisting>
<db:para>In order to have the text edit field occupy the whole screen, we add setCentralWidget to the main window.</db:para>
<db:programlisting language="cpp">Notepad::Notepad(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::Notepad)
{
    ui-&amp;gt;setupUi(this);
    this-&amp;gt;setCentralWidget(ui-&amp;gt;textEdit);

    connect(ui-&amp;gt;actionNew, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::newDocument);
    connect(ui-&amp;gt;actionOpen, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::open);
    connect(ui-&amp;gt;actionSave, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::save);
    connect(ui-&amp;gt;actionSave_as, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::saveAs);
    connect(ui-&amp;gt;actionPrint, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::print);
    connect(ui-&amp;gt;actionExit, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::exit);
    connect(ui-&amp;gt;actionCopy, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::copy);
    connect(ui-&amp;gt;actionCut, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::cut);
    connect(ui-&amp;gt;actionPaste, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::paste);
    connect(ui-&amp;gt;actionUndo, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::undo);
    connect(ui-&amp;gt;actionRedo, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::redo);
    connect(ui-&amp;gt;actionFont, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::selectFont);
    connect(ui-&amp;gt;actionBold, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontBold);
    connect(ui-&amp;gt;actionUnderline, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontUnderline);
    connect(ui-&amp;gt;actionItalic, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::setFontItalic);
    connect(ui-&amp;gt;actionAbout, &amp;amp;QAction::triggered, this, &amp;amp;Notepad::about);

// Disable menu actions for unavailable features
#if !QT_CONFIG(printer)
    ui-&amp;gt;actionPrint-&amp;gt;setEnabled(false);
#endif

#if !QT_CONFIG(clipboard)
    ui-&amp;gt;actionCut-&amp;gt;setEnabled(false);
    ui-&amp;gt;actionCopy-&amp;gt;setEnabled(false);
    ui-&amp;gt;actionPaste-&amp;gt;setEnabled(false);
#endif
}
</db:programlisting>
</db:section>
<db:section xml:id="project-file">
<db:title>Project File</db:title>
<db:para>The wizard generates the following project file, notepad.pro, for us:</db:para>
<db:programlisting language="cpp">TEMPLATE = app
TARGET = notepad

qtHaveModule(printsupport): QT += printsupport
requires(qtConfig(fontdialog))

SOURCES += \
    main.cpp\
    notepad.cpp

HEADERS += notepad.h

FORMS += notepad.ui

RESOURCES += \
    notepad.qrc

# install
target.path = $$[QT_INSTALL_EXAMPLES]/widgets/tutorials/notepad
INSTALLS += target
</db:programlisting>
<db:para>The project file specifies the application name and the qmake template to use for generating the project, as well as the source, header, and UI files included in the project.</db:para>
<db:para>You could also use qmake's -project option to generate the .pro file. Although, in that case, you have to remember to add the line QT += widgets to the generated file in order to link against the Qt Widgets Module.</db:para>
<db:para><db:emphasis role="bold">Learn More</db:emphasis></db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>About</db:para>
</db:th>
<db:th>
<db:para>Here</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>Using Qt Designer</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="qtdesigner-manual.xml">Qt Designer Manual</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Layouts</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="layout.xml">Layout Management</db:link>, <db:link xlink:href="graphicsview.xml#widgets-and-layouts">Widgets and Layouts</db:link>, <db:link xlink:href="layout.xml#layout-examples">Layout Examples</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>The widgets that come with Qt</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="gallery.xml">Qt Widget Gallery</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Main windows and main window classes</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="mainwindow.xml">Application Main Window</db:link>, <db:link xlink:href="examples-mainwindow.xml">Main Window Examples</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>QObjects and the Qt Object model (This is essential to understand Qt)</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="object.xml">Object Model</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>qmake and the Qt build system</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="qmake-manual.xml">qmake Manual</db:link></db:para>
</db:td>
</db:tr>
</db:informaltable>
</db:section>
</db:section>
<db:section xml:id="adding-user-interaction">
<db:title>Adding User Interaction</db:title>
<db:para>To add functionality to the editor, we start by adding menu items and buttons on a toolbar.</db:para>
<db:para>Click on &quot;Type Here&quot;, and add the options New, Open, Save, Save as, Print and Exit. This creates 5 lines in the Action Editor below. To connect the actions to slots, right-click an action and select Go to slot &gt; triggered(), and complete the code for that given slot.</db:para>
<db:para>If we also want to add the actions to a toolbar, we can assign an icon to each <db:link xlink:href="qaction.xml">QAction</db:link>, and then drag the <db:link xlink:href="qaction.xml">QAction</db:link> to the toolbar. You assign an icon by entering an icon name in the Icon property of the action concerned. When the <db:link xlink:href="qaction.xml">QAction</db:link> has been dragged to the toolbar, clicking the icon will launch the associated slot.</db:para>
<db:para>Complete the method newDocument():</db:para>
<db:programlisting language="cpp">void Notepad::newDocument()
{
    currentFile.clear();
    ui-&amp;gt;textEdit-&amp;gt;setText(QString());
}
</db:programlisting>
<db:para>current_file is a global variable containing the file presently being edited. It is defined in the private part of notepad.h:</db:para>
<db:programlisting language="cpp">private:
    Ui::Notepad *ui;
    QString currentFile;
</db:programlisting>
<db:para>clear() clears the text buffer.</db:para>
<db:section xml:id="opening-a-file">
<db:title>Opening a file</db:title>
<db:para>In notepad.ui, right click on actionOpen and select Go to slot</db:para>
<db:para>Complete method open().</db:para>
<db:programlisting language="cpp">void Notepad::open()
{
    QString fileName = QFileDialog::getOpenFileName(this, &quot;Open the file&quot;);
    QFile file(fileName);
    currentFile = fileName;
    if (!file.open(QIODevice::ReadOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot open file: &quot; + file.errorString());
        return;
    }
    setWindowTitle(fileName);
    QTextStream in(&amp;amp;file);
    QString text = in.readAll();
    ui-&amp;gt;textEdit-&amp;gt;setText(text);
    file.close();
}
</db:programlisting>
<db:para>QFileDialog::getOpenFileName opens a dialog enabling you to select a file. <db:link xlink:href="qfile.xml">QFile</db:link> object myfile has the selected file_name as parameter. We store the selected file also into the global variable current_file for later purposes. We open the file with file.open as a readonly text file. If it cannot be opened, a warning is issued, and the program stops.</db:para>
<db:para>We define a <db:link xlink:href="qtextstream.xml">QTextStream</db:link> instream for parameter myfile. The contents of file myfile is copied into <db:link xlink:href="qstring.xml">QString</db:link> <db:code role="parameter">text</db:code>. setText(text) fille the buffer of our editor with text.</db:para>
<db:para>section2 Saving a file</db:para>
<db:para>We create the method for saving a file in the same way as for <db:link xlink:href="qtwidgets-tutorials-notepad-example.xml#opening-a-file">Opening a file</db:link>, by right clicking on actionSave, and selecting Go to Slot.</db:para>
<db:programlisting language="cpp">void Notepad::save()
{
    QString fileName;
    // If we don't have a filename from before, get one.
    if (currentFile.isEmpty()) {
        fileName = QFileDialog::getSaveFileName(this, &quot;Save&quot;);
        currentFile = fileName;
    } else {
        fileName = currentFile;
    }
    QFile file(fileName);
    if (!file.open(QIODevice::WriteOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot save file: &quot; + file.errorString());
        return;
    }
    setWindowTitle(fileName);
    QTextStream out(&amp;amp;file);
    QString text = ui-&amp;gt;textEdit-&amp;gt;toPlainText();
    out &amp;lt;&amp;lt; text;
    file.close();
}
</db:programlisting>
<db:para><db:link xlink:href="qfile.xml">QFile</db:link> object myfile is linked to global variable current_file, the variable that contains the file we were working with. If we cannot open myfile, an error message is issued and the method stops. We create a <db:link xlink:href="qtextstream.xml">QTextStream</db:link> outstream. The contents of the editor buffer is converted to plain text, and then written to outstream.</db:para>
</db:section>
<db:section xml:id="saving-a-file-with-save-as">
<db:title>Saving a file with Save as</db:title>
<db:programlisting language="cpp">void Notepad::saveAs()
{
    QString fileName = QFileDialog::getSaveFileName(this, &quot;Save as&quot;);
    QFile file(fileName);

    if (!file.open(QFile::WriteOnly | QFile::Text)) {
        QMessageBox::warning(this, &quot;Warning&quot;, &quot;Cannot save file: &quot; + file.errorString());
        return;
    }
    currentFile = fileName;
    setWindowTitle(fileName);
    QTextStream out(&amp;amp;file);
    QString text = ui-&amp;gt;textEdit-&amp;gt;toPlainText();
    out &amp;lt;&amp;lt; text;
    file.close();
}
</db:programlisting>
<db:para>This is the same procedure as for Saving a file, the only difference being that here you need to enter a new file name for the file to be created.</db:para>
</db:section>
<db:section xml:id="print-a-file">
<db:title>Print a File</db:title>
<db:para>If you want to use print functionalities, you need to add printsupport to the project file:</db:para>
<db:programlisting language="cpp" role="bad">QT       += printsupport
</db:programlisting>
<db:para>We declare a <db:link xlink:href="qprinter.xml">QPrinter</db:link> object called printer. We launch a printer dialog box and store the selected printer in object printer. If we clicked on Cancel and did not select a printer, the methods returns. The actual printer command is given with <db:code role="parameter">ui-&gt;textEdit-&gt;print</db:code> with our <db:link xlink:href="qprinter.xml">QPrinter</db:link> object as parameter.</db:para>
</db:section>
<db:section xml:id="select-a-font">
<db:title>Select a Font</db:title>
<db:programlisting language="cpp">void Notepad::selectFont()
{
    bool fontSelected;
    QFont font = QFontDialog::getFont(&amp;amp;fontSelected, this);
    if (fontSelected)
        ui-&amp;gt;textEdit-&amp;gt;setFont(font);
}
</db:programlisting>
<db:para>We declare a boolean indicating if we did select a font with <db:link xlink:href="qfontdialog.xml">QFontDialog</db:link>. If so, we set the font with ui-&gt;textEdit-&gt;setFont(myfont).</db:para>
</db:section>
<db:section xml:id="copy-cut-paste-undo-and-redo">
<db:title>Copy, Cut, Paste, Undo, and Redo</db:title>
<db:para>If you select some text, and want to copy it to the clipboard, you call the appropriate method of ui-&gt;textEdit. The same counts for cut, paste, undo, and redo.</db:para>
<db:para>This table shows the method name to use.</db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>Task</db:para>
</db:th>
<db:th>
<db:para>Method called</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>Copy</db:para>
</db:td>
<db:td>
<db:para>ui-&gt;textEdit-&gt;copy()</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Cut</db:para>
</db:td>
<db:td>
<db:para>ui-&gt;textEdit-&gt;cut()</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Paste</db:para>
</db:td>
<db:td>
<db:para>ui-&gt;textEdit-&gt;paste()</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Undo</db:para>
</db:td>
<db:td>
<db:para>ui-&gt;textEdit-&gt;undo()</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Redo</db:para>
</db:td>
<db:td>
<db:para>ui-&gt;textEdit-&gt;redo()</db:para>
</db:td>
</db:tr>
</db:informaltable>
<db:para><db:emphasis role="bold">Learn More</db:emphasis></db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>About</db:para>
</db:th>
<db:th>
<db:para>Here</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>MDI applications</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="qmdiarea.xml">QMdiArea</db:link>, <db:link xlink:href="qtwidgets-mainwindows-mdi-example.xml">MDI Example</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Files and I/O devices</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="qfile.xml">QFile</db:link>, <db:link xlink:href="qiodevice.xml">QIODevice</db:link></db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>tr() and internationalization</db:para>
</db:td>
<db:td>
<db:para><db:link xlink:href="qtlinguist-index.xml">Qt Linguist Manual</db:link>, <db:link xlink:href="i18n-source-translation.xml">Writing Source Code for Translation</db:link>, <db:link xlink:href="internationalization.xml">Internationalization with Qt</db:link></db:para>
</db:td>
</db:tr>
</db:informaltable>
</db:section>
</db:section>
<db:section xml:id="building-and-running-notepad">
<db:title>Building and Running Notepad</db:title>
<db:para>Now that you have all the necessary files, select <db:emphasis role="bold">Build</db:emphasis> &gt; <db:emphasis role="bold">Build Project Notepad</db:emphasis> to build and run the application. Qt Creator uses qmake and make to create an executable in the directory specified in the build settings of the project and runs it.</db:para>
<db:section xml:id="building-and-running-from-the-command-line">
<db:title>Building and Running from the Command Line</db:title>
<db:para>To build the application from the command line, switch to the directory in which you have the .cpp file of the application and add the project file (suffixed .pro) described earlier. The following shell commands then build the application:</db:para>
<db:programlisting language="cpp" role="bad">qmake
make (or nmake on Windows)
</db:programlisting>
<db:para>The commands create an executable in the project directory. The qmake tool reads the project file and produces a Makefile with instructions on how to build the application. The make tool (or the nmake tool) then reads the Makefile and produces the executable binary.</db:para>
</db:section>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Files:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/main.cpp">tutorials/notepad/main.cpp</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/notepad.cpp">tutorials/notepad/notepad.cpp</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/notepad.h">tutorials/notepad/notepad.h</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/notepad.pro">tutorials/notepad/notepad.pro</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/notepad.qrc">tutorials/notepad/notepad.qrc</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/notepad.ui">tutorials/notepad/notepad.ui</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
<db:section>
<db:title>List of Files</db:title>
<db:para>Images:</db:para>
<db:section>
<db:title>List of Files</db:title>
<db:itemizedlist>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/bold.png">tutorials/notepad/images/bold.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/copy.png">tutorials/notepad/images/copy.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/create.png">tutorials/notepad/images/create.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/cut.png">tutorials/notepad/images/cut.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/edit_redo.png">tutorials/notepad/images/edit_redo.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/edit_undo.png">tutorials/notepad/images/edit_undo.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/exit.png">tutorials/notepad/images/exit.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/font.png">tutorials/notepad/images/font.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/info.png">tutorials/notepad/images/info.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/italic.png">tutorials/notepad/images/italic.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/new.png">tutorials/notepad/images/new.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/open.png">tutorials/notepad/images/open.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/paste.png">tutorials/notepad/images/paste.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/pencil.png">tutorials/notepad/images/pencil.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/print.png">tutorials/notepad/images/print.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/save.png">tutorials/notepad/images/save.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/save_as.png">tutorials/notepad/images/save_as.png</db:link></db:para></db:listitem>
<db:listitem>
<db:para><db:link xlink:href="tutorials/notepad/images/underline.png">tutorials/notepad/images/underline.png</db:link></db:para></db:listitem>
</db:itemizedlist>
</db:section>
</db:section></db:section></db:article>
