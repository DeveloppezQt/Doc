<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Mouse Button Tester</db:title>
<db:productname>QtWidgets</db:productname>
<db:edition>Qt 5.14.2 Reference Documentation</db:edition>
<db:titleabbrev>Qt Widgets Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>The 'Mouse Button Tester' example demonstrates how to reimplement mouse events within a custom class. You can also use this program to verify that Qt is actually receiving mouse events from your mouse.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>Many 'gamer' mouse devices are configured with high-numbered &quot;buttons&quot; sending text shortcuts for certain games. With such a mouse, no mouse button events occur: The &quot;mouse&quot; sends keystrokes, and the 'Mouse Button Tester' Window will not see the event. Receiving no event, it will not repaint the Window with new text describing a button event.</db:para>
<db:para>And so, in addition to it's use as Qt example code, the program may be useful s a mouse device tester. Note that there is another example mouse buttons example which provides the same function, written in QML.</db:para>
<db:para>This program (the Widget-based example) consists of three classes, in addition to the main() parent program:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para><db:code>A</db:code> QPushButton, &quot;Quit&quot;.</db:para>
</db:listitem>
<db:listitem>
<db:para><db:code>ButtonTester</db:code>. This is derived from Qt's <db:link xlink:href="qml-qtquick-controls2-textarea.xml">TextArea</db:link> class, for purpose of customizing/re-implementing the mouse and wheel event member functions.</db:para>
</db:listitem>
<db:listitem>
<db:para><db:code>A</db:code> simple QVBoxLayout layout.</db:para>
</db:listitem>
</db:itemizedlist>
<db:para>First we will review the main program, with it's layout and &quot;Quit&quot; QPushButton. Then we will take a look at the <db:code>ButtonTester</db:code> class.</db:para>
<db:section xml:id="the-main-program">
<db:title>The Main Program</db:title>
<db:para>Note that the QPushButton, &quot;Quit&quot;, is defined directly within the main() program, rather than another class. This is a correct way of defining a &quot;Quit&quot; QPushButton: A &quot;Quit&quot; Button defined inside another class would result in the destructor of that second class being called twice. This &quot;Quit&quot; Button uses the traditional Signal/Slot connection to invoke termination of the QApp, which will properly destroy its child classes before terminating itself.</db:para>
<db:para>The remainder of the main() program is concerned with defining the layout, and applying a minimum size to the customized ButtonTester.</db:para>
</db:section>
<db:section xml:id="buttontester-class-definition">
<db:title>ButtonTester Class Definition</db:title>
<db:para>The <db:code>ButtonTester</db:code> class inherits from QTextEdit, and listens for mouse events on all possible Qt::MouseButton values. It also listens for wheel events from the mouse, and indicates the direction of wheel motion (&quot;up&quot;, down&quot;, &quot;left&quot;, or &quot;right&quot;). It prints short debug messages into the Window, and also on the console QDebug() stream, when mouse button and wheel events occur. Our reimplementation of mousePressEvent(), mouseReleaseEvent(), mouseDoubleClickEvent(), and wheelEvent() &quot;drive&quot; the program; the other functions simply convert the Qt::MouseButton values into text strings.</db:para>
<db:para>You should call the ignore() function on any mouse event (or other event) which your widget-based classes do not use and consume. This function assures that Qt will propagate the event through each parent widget, until it is used or propagated to the Window Manager. (Qt attempts to do this automatically, but it is better programming practice to explicitly invoke the function.)</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/mousebutton-buttontester.png"/>
</db:imageobject>
</db:mediaobject>
</db:section>
<db:section>
<db:title>Example project</db:title>
<db:para><db:link xlink:href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/widgets/mousebuttons?h=5.14">Example project @ code.qt.io</db:link></db:para>
</db:section>
</db:article>
