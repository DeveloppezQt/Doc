<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>QNetworkDatagram Class</db:title>
<db:productname>QtNetwork</db:productname>
<db:edition>Qt 6.0.4 Reference Documentation</db:edition>
<db:titleabbrev>Qt Network Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>The <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> class provides the data and metadata of a UDP datagram.</db:para>
<db:para>This class was introduced in Qt 5.8.</db:para>
<db:note>
<db:para>All functions in this class are <db:link xlink:href="threads-reentrancy.xml">reentrant</db:link>.</db:para>
</db:note>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:variablelist>
<db:varlistentry>
<db:term>Header</db:term>
<db:listitem>
<db:para>QNetworkDatagram</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Since</db:term>
<db:listitem>
<db:para>Qt 5.8</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>CMake</db:term>
<db:listitem>
<db:para>find_package(Qt6 REQUIRED COMPONENTS Network)</db:para>
<db:para>target_link_libraries(mytarget PRIVATE Qt6::Network)</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>qmake</db:term>
<db:listitem>
<db:para>QT += network</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Group</db:term>
<db:listitem>
<db:para>QNetworkDatagram is part of <db:simplelist><db:member><db:link xlink:href="network.xml">Network Programming API</db:link></db:member></db:simplelist></db:para>
</db:listitem>
</db:varlistentry>
</db:variablelist>
<db:section xml:id="details">
<db:title>Detailed Description</db:title>
<db:para><db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> can be used with the <db:link xlink:href="qudpsocket.xml">QUdpSocket</db:link> class to represent the full information contained in a UDP (User Datagram Protocol) datagram. <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> encapsulates the following information of a datagram:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>the payload data;</db:para>
</db:listitem>
<db:listitem>
<db:para>the sender address and port number;</db:para>
</db:listitem>
<db:listitem>
<db:para>the destination address and port number;</db:para>
</db:listitem>
<db:listitem>
<db:para>the remaining hop count limit (on IPv4, this field is usually called &quot;time to live&quot; - TTL);</db:para>
</db:listitem>
<db:listitem>
<db:para>the network interface index the datagram was received on or to be sent on.</db:para>
</db:listitem>
</db:itemizedlist>
<db:para><db:link xlink:href="qudpsocket.xml">QUdpSocket</db:link> will try to match a common behavior as much as possible on all operating systems, but not all of the metadata above can be obtained in some operating systems. Metadata that cannot be set on the datagram when sending with <db:link xlink:href="qudpsocket.xml#writeDatagram">QUdpSocket::writeDatagram</db:link>() will be silently discarded.</db:para>
<db:para>Upon reception, the <db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>() and <db:link xlink:href="qnetworkdatagram.xml#senderPort">senderPort</db:link>() properties contain the address and port of the peer that sent the datagram, while <db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>() and <db:link xlink:href="qnetworkdatagram.xml#destinationPort">destinationPort</db:link>() contain the target that was contained in the datagram. That is usually an address local to the current machine, but it can also be an IPv4 broadcast address (such as &quot;255.255.255.255&quot;) or an IPv4 or IPv6 multicast address. Applications may find it useful to determine if the datagram was sent specifically to this machine via unicast addressing or whether it was sent to multiple destinations.</db:para>
<db:para>When sending, the <db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>() and <db:link xlink:href="qnetworkdatagram.xml#senderPort">senderPort</db:link>() should contain the local address to be used when sending. The sender address must be an address that is assigned to this machine, which can be obtained using <db:link xlink:href="qnetworkinterface.xml">QNetworkInterface</db:link>, and the port number must be the port number that the socket is bound to. Either field can be left unset and will be filled in by the operating system with default values. The <db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>() and <db:link xlink:href="qnetworkdatagram.xml#destinationPort">destinationPort</db:link>() fields may be set to a target address different from the one the UDP socket is currently associated with.</db:para>
<db:para>Usually, when sending a datagram in reply to a datagram previously received, one will set the <db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>() to be the <db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>() of the incoming datagram and similarly for the port numbers. To facilitate this common process, <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> provides the function <db:link xlink:href="qnetworkdatagram.xml#makeReply">makeReply</db:link>().</db:para>
<db:para>The hopCount() function contains, for a received datagram, the remaining hop count limit for the packet. When sending, it contains the hop count limit to be set. Most protocols will leave this value set to the default and let the operating system decide on the best value to be used. Multicasting over IPv4 often uses this field to indicate the scope of the multicast group (link-local, local to an organization or global).</db:para>
<db:para>The <db:link xlink:href="qnetworkdatagram.xml#interfaceIndex">interfaceIndex</db:link>() function contains the index of the operating system's interface that received the packet. This value is the same one that can be set on a <db:link xlink:href="qhostaddress.xml#scopeId">QHostAddress::scopeId</db:link>() property and matches the <db:link xlink:href="qnetworkinterface.xml#index">QNetworkInterface::index</db:link>() property. When sending packets to global addresses, it is not necessary to set the interface index as the operating system will choose the correct one using the system routing table. This property is important when sending datagrams to link-local destinations, whether unicast or multicast.</db:para>
<db:section xml:id="feature-support">
<db:title>Feature support</db:title>
<db:para>Some features of <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> are not supported in all operating systems. Only the address and ports of the remote host (sender in received packets and destination for outgoing packets) are supported in all systems. On most operating systems, the other features are supported only for IPv6. Software should check at runtime whether the rest could be determined for IPv4 addresses.</db:para>
<db:para>The current feature support is as follows:</db:para>
<db:informaltable style="generic">
<db:thead>
<db:tr>
<db:th>
<db:para>Operating system</db:para>
</db:th>
<db:th>
<db:para>Local address</db:para>
</db:th>
<db:th>
<db:para>Hop count</db:para>
</db:th>
<db:th>
<db:para>Interface index</db:para>
</db:th>
</db:tr>
</db:thead>
<db:tr valign="top">
<db:td>
<db:para>FreeBSD</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Only for IPv6</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Linux</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>OS X</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Only for IPv6</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Other Unix supporting RFC 3542</db:para>
</db:td>
<db:td>
<db:para>Only for IPv6</db:para>
</db:td>
<db:td>
<db:para>Only for IPv6</db:para>
</db:td>
<db:td>
<db:para>Only for IPv6</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Windows (desktop)</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
<db:td>
<db:para>Supported</db:para>
</db:td>
</db:tr>
<db:tr valign="top">
<db:td>
<db:para>Windows RT</db:para>
</db:td>
<db:td>
<db:para>Not supported</db:para>
</db:td>
<db:td>
<db:para>Not supported</db:para>
</db:td>
<db:td>
<db:para>Not supported</db:para>
</db:td>
</db:tr>
</db:informaltable>
</db:section>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qudpsocket.xml">QUdpSocket</db:link></db:member>
<db:member><db:link xlink:href="qnetworkinterface.xml">QNetworkInterface</db:link></db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="member-function-documentation">
<db:title>Member Function Documentation</db:title>
<db:section xml:id="makeReply-1">
<db:title>QNetworkDatagram QNetworkDatagram::makeReply(const QByteArray &amp;<db:emphasis>payload</db:emphasis>) &amp;&amp;</db:title>
<db:bridgehead renderas="sect2" xml:id="makeReply">QNetworkDatagram QNetworkDatagram::makeReply(const QByteArray &amp;<db:emphasis>payload</db:emphasis>) const &amp;</db:bridgehead>
<db:para>Creates a new <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> representing a reply to this incoming datagram and sets the payload data to <db:code role="parameter">payload</db:code>. This function is a very convenient way of responding to a datagram back to the original sender.</db:para>
<db:para>Example:</db:para>
<db:programlisting language="cpp">    void Server::readPendingDatagrams()
    {
        while (udpSocket-&amp;gt;hasPendingDatagrams()) {
            QNetworkDatagram datagram = udpSocket-&amp;gt;receiveDatagram();
            QByteArray replyData = processThePayload(datagram.data());
            udpSocket-&amp;gt;writeDatagram(datagram.makeReply(replyData));
        }
    }
</db:programlisting>
<db:para>This function is especially convenient since it will automatically copy parameters from this datagram to the new datagram as appropriate:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>this datagram's sender address and port are copied to the new datagram's destination address and port;</db:para>
</db:listitem>
<db:listitem>
<db:para>this datagram's interface index, if any, is copied to the new datagram's interface index;</db:para>
</db:listitem>
<db:listitem>
<db:para>this datagram's destination address and port are copied to the new datagram's sender address and port only if the address is IPv6 global (non-multicast) address;</db:para>
</db:listitem>
<db:listitem>
<db:para>the hop count limit on the new datagram is reset to the default (-1);</db:para>
</db:listitem>
</db:itemizedlist>
<db:para>If <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> is modified in a future version of Qt to carry further metadata, this function will copy that metadata as appropriate.</db:para>
<db:para>This datagram's destination address is not copied if it is an IPv4 address because it is not possible to tell an IPv4 broadcast address apart from a regular IPv4 address without an exhaustive search of all addresses assigned to this machine. Attempting to send a datagram with the sender address equal to the broadcast address is likely to fail. However, this should not affect the communication as network interfaces with multiple IPv4 addresses are uncommon, so the address the operating system will select will likely be one the peer will understand.</db:para>
<db:note>
<db:para>This function comes with both rvalue- and lvalue-reference qualifier overloads, so it is a good idea to make sure this object is rvalue, if possible, before calling <db:link xlink:href="qnetworkdatagram.xml#makeReply">makeReply</db:link>, so as to make better use of move semantics. To achieve that, the example above would use:</db:para>
</db:note>
<db:programlisting language="cpp">    udpSocket-&amp;gt;writeDatagram(std::move(datagram).makeReply(replyData));
</db:programlisting>
</db:section>
<db:section xml:id="QNetworkDatagram">
<db:title>QNetworkDatagram::QNetworkDatagram()</db:title>
<db:constructorsynopsis>
<db:methodname>QNetworkDatagram</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">constructor</db:synopsisinfo>
<db:synopsisinfo role="signature">QNetworkDatagram()</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:constructorsynopsis>
<db:para>Creates a <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object with no payload data and undefined destination address.</db:para>
<db:para>The payload can be modified by using <db:link xlink:href="qnetworkdatagram.xml#setData">setData</db:link>() and the destination address can be set with <db:link xlink:href="qnetworkdatagram.xml#setDestination">setDestination</db:link>().</db:para>
<db:para>If the destination address is left undefined, <db:link xlink:href="qudpsocket.xml#writeDatagram">QUdpSocket::writeDatagram</db:link>() will attempt to send the datagram to the address last associated with, by using <db:link xlink:href="qabstractsocket.xml#connectToHost">QUdpSocket::connectToHost</db:link>().</db:para>
</db:section>
<db:section xml:id="QNetworkDatagram-1">
<db:title>QNetworkDatagram::QNetworkDatagram(const QByteArray &amp;<db:emphasis>data</db:emphasis>, const QHostAddress &amp;<db:emphasis>destinationAddress</db:emphasis> = QHostAddress(), quint16 <db:emphasis>port</db:emphasis> = 0)</db:title>
<db:constructorsynopsis>
<db:methodname>QNetworkDatagram</db:methodname>
<db:methodparam>
<db:type>const QByteArray &amp;</db:type>
<db:parameter>data</db:parameter>
</db:methodparam>
<db:methodparam>
<db:type>const QHostAddress &amp;</db:type>
<db:parameter>destinationAddress</db:parameter>
<db:initializer>QHostAddress()</db:initializer>
</db:methodparam>
<db:methodparam>
<db:type>quint16</db:type>
<db:parameter>port</db:parameter>
<db:initializer>0</db:initializer>
</db:methodparam>
<db:synopsisinfo role="meta">constructor</db:synopsisinfo>
<db:synopsisinfo role="overload">overload</db:synopsisinfo>
<db:synopsisinfo role="overload-number">1</db:synopsisinfo>
<db:synopsisinfo role="signature">QNetworkDatagram(const QByteArray &amp;data, const QHostAddress &amp;destinationAddress, quint16 port)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:constructorsynopsis>
<db:para>Creates a <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object and sets <db:code role="parameter">data</db:code> as the payload data, along with <db:code role="parameter">destinationAddress</db:code> and <db:code role="parameter">port</db:code> as the destination address of the datagram.</db:para>
</db:section>
<db:section xml:id="QNetworkDatagram-2">
<db:title>QNetworkDatagram::QNetworkDatagram(const QNetworkDatagram &amp;<db:emphasis>other</db:emphasis>)</db:title>
<db:constructorsynopsis>
<db:methodname>QNetworkDatagram</db:methodname>
<db:methodparam>
<db:type>const QNetworkDatagram &amp;</db:type>
<db:parameter>other</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">copy-constructor</db:synopsisinfo>
<db:synopsisinfo role="overload">overload</db:synopsisinfo>
<db:synopsisinfo role="overload-number">2</db:synopsisinfo>
<db:synopsisinfo role="signature">QNetworkDatagram(const QNetworkDatagram &amp;other)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:constructorsynopsis>
<db:para>Creates a copy of the <db:code role="parameter">other</db:code> datagram, including the payload and metadata.</db:para>
<db:para>To create a datagram suitable for sending in a reply, use <db:link xlink:href="qnetworkdatagram.xml#makeReply">QNetworkDatagram::makeReply</db:link>();</db:para>
</db:section>
<db:section xml:id="clear">
<db:title>void QNetworkDatagram::clear()</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>clear</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void clear()</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Clears the payload data and metadata in this <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object, resetting them to their default values.</db:para>
</db:section>
<db:section xml:id="data">
<db:title>QByteArray QNetworkDatagram::data() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>QByteArray</db:type>
<db:methodname>data</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">QByteArray data() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the data payload of this datagram. For a datagram received from the network, it contains the payload of the datagram. For an outgoing datagram, it is the datagram to be sent.</db:para>
<db:para>Note that datagrams can be transmitted with no data, so the returned <db:link xlink:href="qbytearray.xml">QByteArray</db:link> may be empty.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#setData">setData</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="destinationAddress">
<db:title>QHostAddress QNetworkDatagram::destinationAddress() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>QHostAddress</db:type>
<db:methodname>destinationAddress</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">QHostAddress destinationAddress() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the destination address associated with this datagram. For a datagram received from the network, it is the address the peer node sent the datagram to, which can either be a local address of this machine or a multicast or broadcast address. For an outgoing datagrams, it is the address the datagram should be sent to.</db:para>
<db:para>If no destination address was set on this datagram, the returned object will report true to <db:link xlink:href="qhostaddress.xml#isNull">QHostAddress::isNull</db:link>().</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationPort">destinationPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setDestination">setDestination</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="destinationPort">
<db:title>int QNetworkDatagram::destinationPort() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>int</db:type>
<db:methodname>destinationPort</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">int destinationPort() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the port number of the destination associated with this datagram. For a datagram received from the network, it is the local port number that the peer node sent the datagram to. For an outgoing datagram, it is the peer port the datagram should be sent to.</db:para>
<db:para>If no destination address was associated with this datagram, this function returns -1.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderPort">senderPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setDestination">setDestination</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="hopLimit">
<db:title>int QNetworkDatagram::hopLimit() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>int</db:type>
<db:methodname>hopLimit</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">int hopLimit() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the hop count limit associated with this datagram. The hop count limit is the number of nodes that are allowed to forward the IP packet before it expires and an error is sent back to the sender of the datagram. In IPv4, this value is usually known as &quot;time to live&quot; (TTL).</db:para>
<db:para>If this datagram was received from the network, this is the remaining hop count of the datagram after reception and was decremented by 1 by each node that forwarded the packet. A value of -1 indicates that the hop limit count not be obtained.</db:para>
<db:para>If this is an outgoing datagram, this is the value to be set in the IP header upon sending. A value of -1 indicates the operating system should choose the value.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#setHopLimit">setHopLimit</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="interfaceIndex">
<db:title>uint QNetworkDatagram::interfaceIndex() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>uint</db:type>
<db:methodname>interfaceIndex</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">uint interfaceIndex() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the interface index this datagram is associated with. The interface index is a positive number that uniquely identifies the network interface in the operating system. This number matches the value returned by <db:link xlink:href="qnetworkinterface.xml#index">QNetworkInterface::index</db:link>() for the interface.</db:para>
<db:para>If this datagram was received from the network, this is the index of the interface that the packet was received from. If this is an outgoing datagram, this is the index of the interface that the datagram should be sent on.</db:para>
<db:para>A value of 0 indicates that the interface index is unknown.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#setInterfaceIndex">setInterfaceIndex</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="isNull">
<db:title>bool QNetworkDatagram::isNull() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>bool</db:type>
<db:methodname>isNull</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">bool isNull() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns true if this <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object is null. This function is the opposite of <db:link xlink:href="qnetworkdatagram.xml#isValid">isValid</db:link>().</db:para>
</db:section>
<db:section xml:id="isValid">
<db:title>bool QNetworkDatagram::isValid() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>bool</db:type>
<db:methodname>isValid</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">bool isValid() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns true if this <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object is valid. A valid <db:link xlink:href="qnetworkdatagram.xml">QNetworkDatagram</db:link> object contains at least one sender or receiver address. Valid datagrams can contain empty payloads.</db:para>
</db:section>
<db:section xml:id="senderAddress">
<db:title>QHostAddress QNetworkDatagram::senderAddress() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>QHostAddress</db:type>
<db:methodname>senderAddress</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">QHostAddress senderAddress() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the sender address associated with this datagram. For a datagram received from the network, it is the address of the peer node that sent the datagram. For an outgoing datagrams, it is the local address to be used when sending.</db:para>
<db:para>If no sender address was set on this datagram, the returned object will report true to <db:link xlink:href="qhostaddress.xml#isNull">QHostAddress::isNull</db:link>().</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderPort">senderPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setSender">setSender</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="senderPort">
<db:title>int QNetworkDatagram::senderPort() const</db:title>
<db:methodsynopsis>
<db:modifier>const</db:modifier>
<db:type>int</db:type>
<db:methodname>senderPort</db:methodname>
<db:void/>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">int senderPort() const</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Returns the port number of the sender associated with this datagram. For a datagram received from the network, it is the port number that the peer node sent the datagram from. For an outgoing datagram, it is the local port the datagram should be sent from.</db:para>
<db:para>If no sender address was associated with this datagram, this function returns -1.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationPort">destinationPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setSender">setSender</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="setData">
<db:title>void QNetworkDatagram::setData(const QByteArray &amp;<db:emphasis>data</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>setData</db:methodname>
<db:methodparam>
<db:type>const QByteArray &amp;</db:type>
<db:parameter>data</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void setData(const QByteArray &amp;data)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Sets the data payload of this datagram to <db:code role="parameter">data</db:code>. It is usually not necessary to call this function on received datagrams. For outgoing datagrams, this function sets the data to be sent on the network.</db:para>
<db:para>Since datagrams can empty, an empty <db:link xlink:href="qbytearray.xml">QByteArray</db:link> is a valid value for <db:code role="parameter">data</db:code>.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#data">data</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="setDestination">
<db:title>void QNetworkDatagram::setDestination(const QHostAddress &amp;<db:emphasis>address</db:emphasis>, quint16 <db:emphasis>port</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>setDestination</db:methodname>
<db:methodparam>
<db:type>const QHostAddress &amp;</db:type>
<db:parameter>address</db:parameter>
</db:methodparam>
<db:methodparam>
<db:type>quint16</db:type>
<db:parameter>port</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void setDestination(const QHostAddress &amp;address, quint16 port)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Sets the destination address associated with this datagram to be the address <db:code role="parameter">address</db:code> and port number <db:code role="parameter">port</db:code>. The destination address and port numbers are usually set by <db:link xlink:href="qudpsocket.xml">QUdpSocket</db:link> upon reception, so there's no need to call this function on a received datagram.</db:para>
<db:para>For outgoing datagrams, this function can be used to set the address the datagram should be sent to. It can be the unicast address used to communicate with the peer or a broadcast or multicast address to send to a group of devices.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qudpsocket.xml#writeDatagram">QUdpSocket::writeDatagram</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationAddress">destinationAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#destinationPort">destinationPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setSender">setSender</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="setHopLimit">
<db:title>void QNetworkDatagram::setHopLimit(int <db:emphasis>count</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>setHopLimit</db:methodname>
<db:methodparam>
<db:type>int</db:type>
<db:parameter>count</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void setHopLimit(int count)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Sets the hop count limit associated with this datagram to <db:code role="parameter">count</db:code>. The hop count limit is the number of nodes that are allowed to forward the IP packet before it expires and an error is sent back to the sender of the datagram. In IPv4, this value is usually known as &quot;time to live&quot; (TTL).</db:para>
<db:para>It is usually not necessary to call this function on datagrams received from the network.</db:para>
<db:para>If this is an outgoing packet, this is the value to be set in the IP header upon sending. The valid range for the value is 1 to 255. This function also accepts a value of -1 to indicate that the operating system should choose the value.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#hopLimit">hopLimit</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="setInterfaceIndex">
<db:title>void QNetworkDatagram::setInterfaceIndex(uint <db:emphasis>index</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>setInterfaceIndex</db:methodname>
<db:methodparam>
<db:type>uint</db:type>
<db:parameter>index</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void setInterfaceIndex(uint index)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Sets the interface index this datagram is associated with to <db:code role="parameter">index</db:code>. The interface index is a positive number that uniquely identifies the network interface in the operating system. This number matches the value returned by <db:link xlink:href="qnetworkinterface.xml#index">QNetworkInterface::index</db:link>() for the interface.</db:para>
<db:para>It is usually not necessary to call this function on datagrams received from the network.</db:para>
<db:para>If this is an outgoing packet, this is the index of the interface the datagram should be sent on. A value of 0 indicates that the operating system should choose the interface based on other factors.</db:para>
<db:para>Note that the interface index can also be set with <db:link xlink:href="qhostaddress.xml#setScopeId">QHostAddress::setScopeId</db:link>() for IPv6 destination addresses and then with <db:link xlink:href="qnetworkdatagram.xml#setDestination">setDestination</db:link>(). If the scope ID set in the destination address and <db:code role="parameter">index</db:code> are different and neither is zero, it is undefined which interface the operating system will send the datagram on.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qnetworkdatagram.xml#interfaceIndex">interfaceIndex</db:link>()</db:member>
<db:member>setInterfaceIndex()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="setSender">
<db:title>void QNetworkDatagram::setSender(const QHostAddress &amp;<db:emphasis>address</db:emphasis>, quint16 <db:emphasis>port</db:emphasis> = 0)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>setSender</db:methodname>
<db:methodparam>
<db:type>const QHostAddress &amp;</db:type>
<db:parameter>address</db:parameter>
</db:methodparam>
<db:methodparam>
<db:type>quint16</db:type>
<db:parameter>port</db:parameter>
<db:initializer>0</db:initializer>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void setSender(const QHostAddress &amp;address, quint16 port)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Sets the sender address associated with this datagram to be the address <db:code role="parameter">address</db:code> and port number <db:code role="parameter">port</db:code>. The sender address and port numbers are usually set by <db:link xlink:href="qudpsocket.xml">QUdpSocket</db:link> upon reception, so there's no need to call this function on a received datagram.</db:para>
<db:para>For outgoing datagrams, this function can be used to set the address the datagram should carry. The address <db:code role="parameter">address</db:code> must usually be one of the local addresses assigned to this machine, which can be obtained using <db:link xlink:href="qnetworkinterface.xml">QNetworkInterface</db:link>. If left unset, the operating system will choose the most appropriate address to use given the destination in question.</db:para>
<db:para>The port number <db:code role="parameter">port</db:code> must be the port number associated with the socket, if there is one. The value of 0 can be used to indicate that the operating system should choose the port number.</db:para>
<db:section>
<db:title>See Also</db:title>
<db:para><db:emphasis>See also </db:emphasis>
<db:simplelist type="vert" role="see-also">
<db:member><db:link xlink:href="qudpsocket.xml#writeDatagram">QUdpSocket::writeDatagram</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderAddress">senderAddress</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#senderPort">senderPort</db:link>()</db:member>
<db:member><db:link xlink:href="qnetworkdatagram.xml#setDestination">setDestination</db:link>()</db:member>
</db:simplelist>
</db:para>
</db:section>
</db:section>
<db:section xml:id="swap">
<db:title>void QNetworkDatagram::swap(QNetworkDatagram &amp;<db:emphasis>other</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:void/>
<db:methodname>swap</db:methodname>
<db:methodparam>
<db:type>QNetworkDatagram &amp;</db:type>
<db:parameter>other</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">plain</db:synopsisinfo>
<db:synopsisinfo role="signature">void swap(QNetworkDatagram &amp;other)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Swaps this instance with <db:code role="parameter">other</db:code>.</db:para>
</db:section>
<db:section xml:id="operator-eq">
<db:title>QNetworkDatagram &amp;QNetworkDatagram::operator=(const QNetworkDatagram &amp;<db:emphasis>other</db:emphasis>)</db:title>
<db:methodsynopsis>
<db:type>QNetworkDatagram &amp;</db:type>
<db:methodname>operator=</db:methodname>
<db:methodparam>
<db:type>const QNetworkDatagram &amp;</db:type>
<db:parameter>other</db:parameter>
</db:methodparam>
<db:synopsisinfo role="meta">copy-assign</db:synopsisinfo>
<db:synopsisinfo role="signature">QNetworkDatagram &amp; operator=(const QNetworkDatagram &amp;other)</db:synopsisinfo>
<db:synopsisinfo role="access">public</db:synopsisinfo>
<db:synopsisinfo role="status">active</db:synopsisinfo>
<db:synopsisinfo role="threadsafeness">unspecified</db:synopsisinfo>
</db:methodsynopsis>
<db:para>Copies the <db:code role="parameter">other</db:code> datagram, including the payload and metadata.</db:para>
<db:para>To create a datagram suitable for sending in a reply, use <db:link xlink:href="qnetworkdatagram.xml#makeReply">QNetworkDatagram::makeReply</db:link>();</db:para>
</db:section>
</db:section>
</db:article>
