<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Porting QML Applications to Qt 5 Example</db:title>
<db:productname>QtDoc</db:productname>
<db:edition>Qt 5.7.1 Reference Documentation</db:edition>
<db:titleabbrev>Qt Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>Provides step-by-step instructions to port a QML application to Qt 5.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The new version of Qt Quick in Qt 5 brings in some changes to the way QML applications are developed. For the complete list of changes that affect existing QML applications, refer to <db:link xlink:href="qtquick-porting-qt5.xml">Porting QML Applications to Qt 5</db:link>.</db:para>
<db:para>This topic will walk through the porting process to make the flickr Qt 4 QML demo work on Qt 5. If you have the SDK based on Qt 4.8 installed, you can find this demo application under &lt;install_dir_root&gt;/Examples/4.x/declarative/demos/.</db:para>
<db:para>Follow these step-by-step instructions to port the <db:emphasis>flickr</db:emphasis> Qt 4 QML application work to Qt 5:</db:para>
<db:orderedlist numeration="arabic">
<db:listitem>
<db:para>Open the <db:emphasis>flickr</db:emphasis> project using Qt Creator.</db:para>
</db:listitem>
<db:listitem>
<db:para>Edit all the .qml files and replace the import QtQuick 1.0 statements with import QtQuick 2.3.</db:para>
</db:listitem>
<db:listitem>
<db:para>Add the additional import QtQuick.XmlListModel 2.0 statement to qml/common/RssModel.qml.</db:para>
<db:note>
<db:para><db:link xlink:href="qtquick-xmllistmodel-qmlmodule.xml">XmlListModel</db:link> is part of a submodule under QtQuick and it must be imported explicitly in order to use it.</db:para>
</db:note>
</db:listitem>
<db:listitem>
<db:para>Make the following changes to qmlapplicationviewer/qmlapplicationviewer.h:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>Replace the #include &lt;QtDeclarative/QDeclarativeView&gt; with #include &lt;QQuickView&gt;.</db:para>
</db:listitem>
<db:listitem>
<db:para>Replace QDeclarativeView with QQuickView in the class declaration for QmlApplicationViewer.</db:para>
</db:listitem>
<db:listitem>
<db:para>Replace the parameter for QmlApplicationViewer constructor from QWidget to QWindow.</db:para>
</db:listitem>
</db:itemizedlist>
</db:listitem>
<db:listitem>
<db:para>Make the following changes to qmlapplicationviewer/qmlapplicationviewer.cpp:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para>Replace all the QtCore and QtDeclarative include statements with these:</db:para>
<db:programlisting language="cpp">#include &lt;QCoreApplication&gt;
#include &lt;QDir&gt;
#include &lt;QFileInfo&gt;
#include &lt;QQmlComponent&gt;
#include &lt;QQmlEngine&gt;
#include &lt;QQmlContext&gt;
#include &lt;QDebug&gt;
</db:programlisting>
</db:listitem>
<db:listitem>
<db:para>Replace all instances of QWidget with QWindow, and QDeclarativeView with QQuickView.</db:para>
</db:listitem>
<db:listitem>
<db:para>Remove the code between #if defined(Q_OS_SYMBIAN) and #endif macros as Symbian platform is not supported in Qt 5.</db:para>
</db:listitem>
<db:listitem>
<db:para>Remove the code between #if QT_VERSION &lt; 0x040702 and #else, and #endif // QT_VERSION &lt; 0x040702 macros towards the end.</db:para>
</db:listitem>
</db:itemizedlist>
</db:listitem>
<db:listitem>
<db:para>Save changes to the project and run the application.</db:para>
</db:listitem>
</db:orderedlist>
<db:para>Once you see the application running, check whether it behaves as expected. Here is a snapshot of the application running on Ubuntu v12.04:</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/flickr_application.png"/>
</db:imageobject>
</db:mediaobject>
<db:section xml:id="related-topics">
<db:title>Related Topics</db:title>
<db:para><db:link xlink:href="qtquick-porting-qt5.xml">Porting QML Applications to Qt 5</db:link></db:para>
</db:section>
</db:article>
