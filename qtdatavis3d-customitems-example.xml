<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Custom Items Example</db:title>
<db:productname>QtDataVis3D</db:productname>
<db:edition>Qt Data Visualization | Commercial or GPLv3</db:edition>
<db:titleabbrev>Qt Data Visualization Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>Adding custom items to a surface graph.</db:para>
<db:para>This documentation was introduced in QtDataVisualization 1.1.</db:para>
</db:abstract>
<db:pubdate>2024-01-26</db:pubdate>
<db:date>2024-01-26</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The custom items example shows how to add your own custom meshes as items to a graph, and how to remove them.</db:para>
<db:mediaobject>
<db:imageobject>
<db:imagedata fileref="images/customitems-example.png"/>
</db:imageobject>
</db:mediaobject>
<db:section xml:id="running-the-example">
<db:title>Running the Example</db:title>
<db:para>To run the example from <db:link xlink:href="https://doc.qt.io/qtcreator/index.html">Qt Creator</db:link>, open the <db:guilabel>Welcome</db:guilabel> mode and select the example from <db:guilabel>Examples</db:guilabel>. For more information, visit <db:link xlink:href="https://doc.qt.io/qtcreator/creator-build-example-application.html">Building and Running an Example</db:link>.</db:para>
</db:section>
<db:section xml:id="adding-custom-meshes-to-the-application">
<db:title>Adding Custom Meshes to the Application</db:title>
<db:para>We'll add the meshes in a resource file:</db:para>
<db:programlisting language="cpp">&amp;lt;RCC&amp;gt;
...
&amp;lt;qresource prefix=&quot;/items&quot;&amp;gt;
    &amp;lt;file&amp;gt;refinery.obj&amp;lt;/file&amp;gt;
    &amp;lt;file&amp;gt;oilrig.obj&amp;lt;/file&amp;gt;
&amp;lt;/qresource&amp;gt;
&amp;lt;/RCC&amp;gt;
</db:programlisting>
</db:section>
<db:section xml:id="adding-custom-item-to-a-graph">
<db:title>Adding Custom Item to a Graph</db:title>
<db:para>In this example we do not have specific textures for our meshes, so we'll just create a small <db:link xlink:href="qimage.xml">QImage</db:link> and fill it with a single color:</db:para>
<db:programlisting language="cpp">QImage color = QImage(2, 2, QImage::Format_RGB32);
color.fill(Qt::red);
</db:programlisting>
<db:para>Then we'll specify the position for the item in a variable. This way we'll be able to use it later for removing the correct item:</db:para>
<db:programlisting language="cpp">QVector3D positionOne = QVector3D(39.0f, 77.0f, 19.2f);
</db:programlisting>
<db:para>Then we'll create a new <db:link xlink:href="qcustom3ditem.xml">QCustom3DItem</db:link> with all the parameters:</db:para>
<db:programlisting language="cpp">QCustom3DItem *item = new QCustom3DItem(&quot;:/items/oilrig.obj&quot;, positionOne,
                                        QVector3D(0.025f, 0.025f, 0.025f),
                                        QQuaternion::fromAxisAndAngle(0.0f, 1.0f, 0.0f, 45.0f),
                                        color);
</db:programlisting>
<db:para>And finally we'll just add the item:</db:para>
<db:programlisting language="cpp">m_graph-&amp;gt;addCustomItem(item);
</db:programlisting>
</db:section>
<db:section xml:id="removing-custom-item-from-a-graph">
<db:title>Removing Custom Item from a Graph</db:title>
<db:para>We'll just call <db:code>removeCustomItemAt()</db:code> with the position of the item:</db:para>
<db:programlisting language="cpp">m_graph-&amp;gt;removeCustomItemAt(positionOne);
</db:programlisting>
<db:note>
<db:para>Removing a custom item from the graph also deletes it. If you want to preserve the item, you need to use <db:code>releaseCustomItem()</db:code> method instead.</db:para>
</db:note>
</db:section>
<db:section xml:id="example-contents">
<db:title>Example Contents</db:title>
<db:section>
<db:title>Example project</db:title>
<db:para><db:link xlink:href="https://code.qt.io/cgit/qt/qtdatavis3d.git/tree/examples/datavisualization/customitems?h=6.4">Example project @ code.qt.io</db:link></db:para>
</db:section>
</db:section>
</db:article>
