<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>QAbstractNativeEventFilter Class</db:title>
<db:productname>QtCore</db:productname>
<db:edition>Qt 5.4.2 Reference Documentation</db:edition>
<db:titleabbrev>Qt Core Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>The <db:link xlink:href="qabstractnativeeventfilter.xml">QAbstractNativeEventFilter</db:link> class provides an interface for receiving native events, such as MSG or XCB event structs.</db:para>
<db:para>This class was introduced in Qt 5.0.</db:para>
</db:abstract>
<db:pubdate>2025-06-29</db:pubdate>
<db:date>2025-06-29</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:variablelist>
<db:varlistentry>
<db:term>Header</db:term>
<db:listitem>
<db:para>QAbstractNativeEventFilter</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>Since</db:term>
<db:listitem>
<db:para>Qt 5.0</db:para>
</db:listitem>
</db:varlistentry>
<db:varlistentry>
<db:term>qmake</db:term>
<db:listitem>
<db:para>QT += core</db:para>
</db:listitem>
</db:varlistentry>
</db:variablelist>
<db:section xml:id="details">
<db:title>Detailed Description</db:title>
</db:section>
<db:section xml:id="member-function-documentation">
<db:title>Member Function Documentation</db:title>
<db:section xml:id="QAbstractNativeEventFilter">
<db:title>QAbstractNativeEventFilter::QAbstractNativeEventFilter()</db:title>
<db:para>Creates a native event filter.</db:para>
<db:para>By default this doesn't do anything. Remember to install it on the application object.</db:para>
</db:section>
<db:section xml:id="dtor.QAbstractNativeEventFilter">
<db:title>[virtual noexcept] QAbstractNativeEventFilter::~QAbstractNativeEventFilter()</db:title>
<db:para>Destroys the native event filter.</db:para>
<db:para>This automatically removes it from the application.</db:para>
</db:section>
<db:section xml:id="nativeEventFilter">
<db:title>[pure virtual] bool QAbstractNativeEventFilter::nativeEventFilter(const QByteArray &amp;<db:emphasis>eventType</db:emphasis>, void *<db:emphasis>message</db:emphasis>, long *<db:emphasis>result</db:emphasis>)</db:title>
<db:para>This method is called for every native event.</db:para>
<db:note>
<db:para>The filter function here receives native messages, for example, MSG or XCB event structs.</db:para>
</db:note>
<db:para>It is called by the QPA platform plugin. On Windows, it is called by the event dispatcher.</db:para>
<db:para>The type of event <db:code role="parameter">eventType</db:code> is specific to the platform plugin chosen at run-time, and can be used to cast <db:code role="parameter">message</db:code> to the right type.</db:para>
<db:para>On X11, <db:code role="parameter">eventType</db:code> is set to &quot;xcb_generic_event_t&quot;, and the <db:code role="parameter">message</db:code> can be casted to a xcb_generic_event_t pointer.</db:para>
<db:para>On Windows, <db:code role="parameter">eventType</db:code> is set to &quot;windows_generic_MSG&quot; for messages sent to toplevel windows, and &quot;windows_dispatcher_MSG&quot; for system-wide messages such as messages from a registered hot key. In both cases, the <db:code role="parameter">message</db:code> can be casted to a MSG pointer. The <db:code role="parameter">result</db:code> pointer is only used on Windows, and corresponds to the LRESULT pointer.</db:para>
<db:para>On Mac, <db:code role="parameter">eventType</db:code> is set to &quot;mac_generic_NSEvent&quot;, and the <db:code role="parameter">message</db:code> can be casted to an EventRef.</db:para>
<db:para>On Blackberry (not plain QNX) <db:code role="parameter">eventType</db:code> is set to &quot;bps_event_t&quot;, and the <db:code role="parameter">message</db:code> can be casted to a bps_event_t pointer.</db:para>
<db:para>In your reimplementation of this function, if you want to filter the <db:code role="parameter">message</db:code> out, i.e. stop it being handled further, return true; otherwise return false.</db:para>
<db:para>Example:</db:para>
<db:programlisting language="cpp">class MyXcbEventFilter : public QAbstractNativeEventFilter
{
public:
    virtual bool nativeEventFilter(const QByteArray &amp;eventType, void *message, long *) Q_DECL_OVERRIDE
    {
        if (eventType == &quot;xcb_generic_event_t&quot;) {
            xcb_generic_event_t* ev = static_cast&lt;xcb_generic_event_t *&gt;(message);
            // ...
        }
        return false;
    }
};
</db:programlisting>
</db:section>
</db:section>
</db:article>
