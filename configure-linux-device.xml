<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Configure an Embedded Linux Device</db:title>
<db:productname>QtDoc</db:productname>
<db:edition>Qt 5.15.0 Reference Documentation</db:edition>
<db:titleabbrev>Qt Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>Provides information about how to configure an Embedded Linux device in Qt.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>Building Qt for a given device requires a toolchain and a sysroot. Additionally, some devices require vendor-specific adaptation code for EGL and OpenGL ES 2.0 support. This is not relevant for non-accelerated platforms, such as those that use the LinuxFB plugin, which is meant for software-based rendering only.</db:para>
<db:para>The <db:emphasis>qtbase/mkspecs/devices</db:emphasis> directory contains configuration and graphics adaptation code for a number of devices. For example, the linux-rasp-pi2-g++ mkspec contains build settings such as the optimal compiler and linker flags for the <db:link xlink:href="http://www.raspberrypi.org">Raspberry Pi 2</db:link> device. The mkspec also contains information about either an implementation of the <db:emphasis>eglfs</db:emphasis> hooks (vendor-specific adaptation code), or a reference to the suitable <db:emphasis>eglfs</db:emphasis> device integration plugin. The device is selected through the <db:link xlink:href="configure-options.xml">configure</db:link> tool's -device parameter. The name that follows after this argument must, at least partially, match one of the subdirectories under <db:emphasis>devices</db:emphasis>.</db:para>
<db:para>The following is an example configuration for the Raspberry Pi 2. For most Embedded Linux boards, the configure command looks similar:</db:para>
<db:programlisting language="cpp" role="bad">./configure -release -opengl es2 -device linux-rasp-pi2-g++ -device-option CROSS_COMPILE=$TOOLCHAIN/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin/arm-linux-gnueabihf- -sysroot $ROOTFS -prefix /usr/local/qt5
</db:programlisting>
<db:para>The most important parameters are -device and -sysroot. By specifying -sysroot, the include files and libraries used by configure's feature detection tests, as well as Qt itself, are taken from the specified location, instead of the host PC's standard locations. Consequently, installing development packages on the host machine has no relevance. For example, to get libinput support, it is not sufficient or necessary to have the libinput development headers and libraries installed on the host environment. Instead, the headers and the libraries for the target architecture, such as ARM, must be present in the sysroot.</db:para>
<db:para>pkg-config is supported also when performing cross-compilation. configure automatically sets PKG_CONFIG_LIBDIR to make pkg-config report compiler and linker settings based on the sysroot instead of the host machine. This usually functions well without any further adjustments. However, environment variables such as PKG_CONFIG_PATH must be unset for the host machine before running configure. Otherwise, the Qt build may attempt to use inappropriate headers and libraries from the host system.</db:para>
<db:para>Specifying -sysroot results in automatically setting the --sysroot argument when invoking the compiler. In some cases this is not desirable and can be disabled by passing -no-gcc-sysroot to configure.</db:para>
<db:para>-prefix, -extprefix, and -hostprefix control the intended destination directory of the Qt build. In the above example the ARM build of Qt is expected to be placed in /usr/local/qt5 on the target device. Note that running make install does not deploy anything to the device. Instead, the install step targets the directory specified by extprefix which defaults to sysroot + prefix and is therefore optional. However, in many cases &quot;polluting&quot; the sysroot is not desirable and thus specifying -extprefix becomes important. Finally, -hostprefix allows separating host tools like qmake, rcc, uic from the binaries for the target. When given, such tools will be installed under the specified directory instead of extprefix.</db:para>
<db:para>For more information, see <db:link xlink:href="configure-options.xml">Qt Configure Options</db:link>.</db:para>
</db:article>
