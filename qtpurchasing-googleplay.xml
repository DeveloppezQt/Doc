<?xml version="1.0" encoding="UTF-8"?>
<db:article xmlns:db="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.2" xml:lang="en">
<db:info>
<db:title>Registering Products in Google Play</db:title>
<db:productname>QtPurchasing</db:productname>
<db:edition>Qt 5.15.0 Reference Documentation</db:edition>
<db:titleabbrev>Qt Purchasing Reference Documentation</db:titleabbrev>
<db:abstract>
<db:para>A short guide to registering in-app products in Google Play.</db:para>
</db:abstract>
<db:pubdate>2024-12-27</db:pubdate>
<db:date>2024-12-27</db:date>
<db:authorgroup>
<db:author>
<db:orgname class="corporation">The Qt Company Ltd.</db:orgname>
</db:author>
</db:authorgroup>
</db:info>
<db:para>The Google Play market place allows you to register your application, as well as the in-app products you want to make available to it, without publishing it. The following guide gives a brief introduction on uploading your application to Google Play and registering products.</db:para>
<db:para>For more information, refer to the <db:link xlink:href="http://developer.android.com/google/play/billing/billing_testing.html">Android documentation</db:link>.</db:para>
<db:section xml:id="preparing-your-application-for-submission">
<db:title>Preparing Your Application for Submission</db:title>
<db:para>Before you can upload your application to Google Play, you must prepare it for submission.</db:para>
<db:section xml:id="adding-a-manifest-xml">
<db:title>Adding a Manifest XML</db:title>
<db:para>The default <db:code>AndroidManifest.xml</db:code> generated for applications by Qt is suitable for development testing, but cannot be used when submitting the application to Google Play.</db:para>
<db:para>Create your own manifest by clicking the <db:guilabel>Create Templates</db:guilabel> button in Qt Creator. You can find the button under <db:guilabel>Projects</db:guilabel> &gt; <db:guilabel>Build</db:guilabel> tab. Expand <db:guilabel>Build Android APK</db:guilabel> to see it.</db:para>
<db:para>Once the manifest is added to your project, you can modify it. The most important parts are the application name and the package name. The package name must be unique, and it is recommended to follow the com.mycompany.myappname naming convention. The &quot;com.mycompany&quot; namespace is based on the Internet domain ownership to avoid naming collisions with other applications.</db:para>
<db:para>Other important parts of the manifest include the <db:code>versionCode</db:code>, which must be incremented every time you upload a new version of the application. Other properties will decide how your application package is presented in the store listing, such as the application name and the version name.</db:para>
<db:para>Finally, the application needs the billing permission. If you disabled <db:guilabel>Include default permissions for Qt modules</db:guilabel> from Qt Creator, you'll need to add</db:para>
<db:programlisting language="cpp">&amp;lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&amp;gt;
</db:programlisting>
<db:para>to your manifest file.</db:para>
<db:para>For more information on the <db:code>AndroidManifest.xml</db:code>, see <db:link xlink:href="http://developer.android.com/guide/topics/manifest/manifest-element.html">Android documentation</db:link>.</db:para>
</db:section>
<db:section xml:id="signing-the-application">
<db:title>Signing the Application</db:title>
<db:para>Qt uses the default debug key to sign your application to enable running the application on a device. Same key cannot be used to sign the Application Package (APK) that is meant to be published on Google Play.</db:para>
<db:para>Use a private a key to sign your application to publish it on Google Play. To do so, open the <db:guilabel>Build Android APK</db:guilabel> in Qt Creator and add keystore information. When you are done, select <db:guilabel>Release</db:guilabel> as the build configuration and deploy your project.</db:para>
<db:para>This should create an <db:code>APK</db:code> file in the build directory of your project.</db:para>
<db:note>
<db:para>Save the key used to sign the application for future use. You must sign the future versions of the application using the same key.</db:para>
</db:note>
</db:section>
</db:section>
<db:section xml:id="registering-your-application">
<db:title>Registering Your Application</db:title>
<db:para>Once the application is prepared for publishing, you can create a listing for it in Google Play.</db:para>
<db:para>The first step is to get a publisher account, if you do not already have one. Go to <db:link xlink:href="https://play.google.com/apps/publish/">the Google Play developer console</db:link>, log in with the Google account of your choice, and follow the steps as directed.</db:para>
<db:para>When you have set up your account, click on <db:guilabel>Add new application</db:guilabel> in Google Play's developer console.</db:para>
<db:para>Fill out as much information as you want in the store listing, and also the <db:guilabel>Pricing and distribution</db:guilabel> page.</db:para>
<db:section xml:id="publishing-your-application">
<db:title>Publishing Your Application</db:title>
<db:para>In order to test in-app purchases in your application, you first have to publish it. To limit the users who can access the application before it is ready for production, it can be published as either alpha or beta, in the respective tabs on the <db:guilabel>APK</db:guilabel> page of the developer console. In order to make an alpha or beta application, fill out all the required information about the application, upload the <db:code>APK</db:code> file under the <db:guilabel>Beta testing</db:guilabel> or <db:guilabel>Alpha testing</db:guilabel> tab, and mark the application as <db:guilabel>published</db:guilabel>.</db:para>
<db:para>When the selected test users that you have added to your alpha or beta program purchase in-app products in your application, they will make actual purchases and will be charged for them. For testing purchases, you can register the e-mail addresses that should have testing access, under <db:guilabel>Settings</db:guilabel> in the developer console. The users with these e-mail addresses can purchase your in-app products without being charged for the purchase, and the transaction is canceled automatically at a later stage.</db:para>
</db:section>
<db:section xml:id="adding-in-app-products">
<db:title>Adding In-App Products</db:title>
<db:para>In order to access in-app products from your application, you must register them in Google Play. Go to the <db:guilabel>In-app products</db:guilabel> page and click <db:guilabel>Add new product</db:guilabel>.</db:para>
<db:para>Fill out the following information about your product:</db:para>
<db:itemizedlist>
<db:listitem>
<db:para><db:guilabel>Product ID</db:guilabel> - an identifier that is used to access the product from your code.</db:para>
</db:listitem>
<db:listitem>
<db:para><db:guilabel>Product Type</db:guilabel> - Choose <db:guilabel>Managed product</db:guilabel> as this is the only type supported by the Qt Purchasing API.</db:para>
</db:listitem>
<db:listitem>
<db:para>Price for the product in all the different geographical areas where it is available.</db:para>
</db:listitem>
</db:itemizedlist>
<db:para>Once these details are added, <db:guilabel>Activate</db:guilabel> the product. If you have not published the application yet, the product is marked as <db:guilabel>To be activated</db:guilabel>. Otherwise, it is marked as active. The product must be activated before it can be queried from the Qt Purchasing API. If the application has recently been published, then it may take a few hours before the in-app products can be accessed from your application. Look for the <db:guilabel>Updates pending</db:guilabel> label on the top right side of the screen. If this is visible, then there are updates pending which are not yet visible from the outside.</db:para>
<db:note>
<db:para>Only application packages signed with the same key used for the one in Google Play can make purchases in the application. If you want to test in-app purchases, make sure the application package is signed before you deploy and run it. It's also required that the <db:code>versionCode</db:code> of the the application is same as the package in Google Play. Upload a new package to Google Play every time the <db:code>versionCode</db:code> is updated.</db:para>
</db:note>
</db:section>
</db:section>
</db:article>
